import{j as N,H as Ks,P as Ws,r as V,u as Rs,B as Ys,g as $s,c as Ge,a as Rl,b as El,d as xl,e as Cl,R as Sl,C as Il}from"./index-2RzRtxgr.js";import{C as Tl,M as Al,B as Ol}from"./index-NT0gHbpn.js";const kl=({data:e})=>N.jsxs(N.Fragment,{children:[N.jsx(Ks,{type:"target",position:Ws.Top,style:{opacity:0,pointerEvents:"none"}}),N.jsx(Ks,{type:"source",position:Ws.Bottom,style:{opacity:0,pointerEvents:"none"}}),N.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:"#111",cursor:"pointer"},title:e?.label||e?.title||""})]}),Ml=({x:e,y:a,node:t,onClose:n,onToggleSubnodes:r,hasHiddenSubnodes:i,onDeleteNode:u,onAddChildNode:s,onChangeLayoutMode:o})=>{const f=V.useRef(null),[c,d]=V.useState(!1);V.useEffect(()=>{const v=b=>{f.current&&!f.current.contains(b.target)&&n()},g=b=>{b.key==="Escape"&&n()};return document.addEventListener("mousedown",v),document.addEventListener("keydown",g),()=>{document.removeEventListener("mousedown",v),document.removeEventListener("keydown",g)}},[n]);const h=V.useCallback(()=>{r(t),n()},[t,r,n]),l=V.useCallback(()=>{u&&u(t.id),n()},[t,u,n]),q=V.useCallback(()=>{s&&s(t.id),n()},[t,s,n]),_=V.useCallback(v=>{o&&o(t.id,v),d(!1),n()},[t,o,n]),p={left:Math.min(e,window.innerWidth-200),top:Math.min(a,window.innerHeight-100)};return N.jsxs("div",{ref:f,className:"node-context-menu",style:{position:"fixed",left:p.left,top:p.top,background:"white",borderRadius:"8px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.15)",border:"1px solid #e5e7eb",padding:"4px",minWidth:"180px",zIndex:1e3,animation:"fadeIn 0.15s ease-out"},children:[N.jsxs("button",{onClick:h,style:{display:"flex",alignItems:"center",width:"100%",padding:"8px 12px",background:"transparent",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",color:"#374151",transition:"background 0.15s",textAlign:"left",gap:"8px"},onMouseEnter:v=>{v.currentTarget.style.background="#f3f4f6"},onMouseLeave:v=>{v.currentTarget.style.background="transparent"},children:[N.jsx("span",{style:{fontSize:"16px"},children:i?"ðŸ‘ï¸":"ðŸ‘ï¸â€ðŸ—¨ï¸"}),N.jsx("span",{children:i?"ÐŸÐ¾ÐºÐ°Ð·Ð°Ñ‚ÑŒ Ð¿Ð¾Ð´Ð½Ð¾Ð´Ñ‹":"Ð¡ÐºÑ€Ñ‹Ñ‚ÑŒ Ð¿Ð¾Ð´Ð½Ð¾Ð´Ñ‹"})]}),N.jsxs("button",{onClick:q,style:{display:"flex",alignItems:"center",width:"100%",padding:"8px 12px",background:"transparent",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",color:"#374151",transition:"background 0.15s",textAlign:"left",gap:"8px"},onMouseEnter:v=>{v.currentTarget.style.background="#f3f4f6"},onMouseLeave:v=>{v.currentTarget.style.background="transparent"},children:[N.jsx("span",{style:{fontSize:"16px"},children:"âž•"}),N.jsx("span",{children:"Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð´Ð¾Ñ‡ÐµÑ€Ð½ÑŽÑŽ Ð½Ð¾Ð´Ñƒ"})]}),N.jsxs("div",{style:{position:"relative"},children:[N.jsxs("button",{onClick:()=>d(!c),style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",padding:"8px 12px",background:c?"#f3f4f6":"transparent",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",color:"#374151",transition:"background 0.15s",textAlign:"left"},onMouseEnter:v=>{c||(v.currentTarget.style.background="#f3f4f6")},onMouseLeave:v=>{c||(v.currentTarget.style.background="transparent")},children:[N.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[N.jsx("span",{style:{fontSize:"16px"},children:"ðŸ“"}),N.jsx("span",{children:"Ð Ð°ÑÐ¿Ð¾Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ Ð¿Ð¾Ð´Ð½Ð¾Ð´"})]}),N.jsx("span",{style:{fontSize:"12px"},children:"â–¶"})]}),c&&N.jsxs("div",{style:{position:"absolute",left:"100%",top:0,background:"white",borderRadius:"8px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.15)",border:"1px solid #e5e7eb",padding:"4px",minWidth:"160px",marginLeft:"4px",zIndex:1001},children:[N.jsxs("button",{onClick:()=>_("default"),style:{display:"flex",alignItems:"center",width:"100%",padding:"8px 12px",background:"transparent",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",color:"#374151",transition:"background 0.15s",textAlign:"left",gap:"8px"},onMouseEnter:v=>{v.currentTarget.style.background="#f3f4f6"},onMouseLeave:v=>{v.currentTarget.style.background="transparent"},children:[N.jsx("span",{style:{fontSize:"16px",width:"20px"},children:!t.data?.layoutMode||t.data.layoutMode==="default"?"âœ“":" "}),N.jsx("span",{children:"ÐŸÐ¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ"})]}),N.jsxs("button",{onClick:()=>_("column"),style:{display:"flex",alignItems:"center",width:"100%",padding:"8px 12px",background:"transparent",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",color:"#374151",transition:"background 0.15s",textAlign:"left",gap:"8px"},onMouseEnter:v=>{v.currentTarget.style.background="#f3f4f6"},onMouseLeave:v=>{v.currentTarget.style.background="transparent"},children:[N.jsx("span",{style:{fontSize:"16px",width:"20px"},children:t.data?.layoutMode==="column"?"âœ“":" "}),N.jsx("span",{children:"ÐšÐ¾Ð»Ð¾Ð½ÐºÐ° (ÑÑ‚ÐµÐº)"})]})]})]}),N.jsxs("button",{onClick:l,style:{display:"flex",alignItems:"center",width:"100%",padding:"8px 12px",background:"transparent",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",color:"#ef4444",transition:"background 0.15s",textAlign:"left",gap:"8px"},onMouseEnter:v=>{v.currentTarget.style.background="#fef2f2"},onMouseLeave:v=>{v.currentTarget.style.background="transparent"},children:[N.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 64 64",xmlns:"http://www.w3.org/2000/svg",style:{display:"inline-block",flexShrink:0},children:[N.jsx("path",{d:"M16 24 L20 56 L44 56 L48 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinejoin:"round",strokeLinecap:"round"}),N.jsx("path",{d:"M12 20 H52",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round"}),N.jsx("path",{d:"M24 20 V14 Q24 10 28 10 H36 Q40 10 40 14 V20",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round"}),N.jsx("path",{d:"M32 30 V50",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]}),N.jsx("span",{children:"Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ Ð½Ð¾Ð´Ñƒ"})]}),N.jsx("div",{style:{height:"1px",background:"#e5e7eb",margin:"4px 8px"}}),N.jsxs("button",{onClick:n,style:{display:"flex",alignItems:"center",width:"100%",padding:"8px 12px",background:"transparent",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",color:"#6b7280",transition:"background 0.15s",textAlign:"left",gap:"8px"},onMouseEnter:v=>{v.currentTarget.style.background="#f3f4f6"},onMouseLeave:v=>{v.currentTarget.style.background="transparent"},children:[N.jsx("span",{style:{fontSize:"16px"},children:"âœ–"}),N.jsx("span",{children:"Ð—Ð°ÐºÑ€Ñ‹Ñ‚ÑŒ"})]}),N.jsx("style",{children:`
        @keyframes fadeIn {
          from {
            opacity: 0;
            transform: scale(0.95);
          }
          to {
            opacity: 1;
            transform: scale(1);
          }
        }
      `})]})};function Xs(e,a,t,n,r){const i=n-e,u=r-a,s=Math.sqrt(i*i+u*u);return s===0?{x:e,y:a}:{x:e+i/s*t,y:a+u/s*t}}function Pl({id:e,sourceX:a,sourceY:t,targetX:n,targetY:r,style:i={},markerEnd:u,source:s,target:o}){const f=Rs(R=>R.nodeInternals.get(s)),c=Rs(R=>R.nodeInternals.get(o));if(!f||!c){const[R]=$s({sourceX:a,sourceY:t,targetX:n,targetY:r});return N.jsx(Ys,{id:e,path:R,markerEnd:u,style:i})}const d=R=>{const x=R.width??0,C=R.height??0;return x===0&&C===0?4:Math.max(2,Math.min(x,C)/2)},h=d(f),l=d(c),q=f.position.x+(f.width??0)/2,_=f.position.y+(f.height??0)/2,p=c.position.x+(c.width??0)/2,v=c.position.y+(c.height??0)/2,g=Xs(q,_,h,p,v),b=Xs(p,v,l,q,_),[m]=$s({sourceX:g.x,sourceY:g.y,targetX:b.x,targetY:b.y});return N.jsx(Ys,{id:e,path:m,markerEnd:u,style:i})}function Ll(e){V.useEffect(()=>{if(e)return window.__HYDRA_EXPORT__=()=>{const a=e.toObject();return{nodes:a.nodes.map(({id:t,position:n,type:r,data:i,width:u,height:s})=>({id:t,position:n,type:r,data:i,width:u,height:s})),edges:a.edges.map(({id:t,source:n,target:r,type:i,label:u})=>({id:t,source:n,target:r,type:i,label:u})),viewport:a.viewport,meta:{ts:new Date().toISOString(),nodeCount:a.nodes.length,edgeCount:a.edges.length}}},()=>{delete window.__HYDRA_EXPORT__}},[e])}function Es(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ir,Zs;function jl(){if(Zs)return ir;Zs=1;function e(){this.__data__=[],this.size=0}return ir=e,ir}var sr,Js;function we(){if(Js)return sr;Js=1;function e(a,t){return a===t||a!==a&&t!==t}return sr=e,sr}var ur,Qs;function Ue(){if(Qs)return ur;Qs=1;var e=we();function a(t,n){for(var r=t.length;r--;)if(e(t[r][0],n))return r;return-1}return ur=a,ur}var or,eu;function Nl(){if(eu)return or;eu=1;var e=Ue(),a=Array.prototype,t=a.splice;function n(r){var i=this.__data__,u=e(i,r);if(u<0)return!1;var s=i.length-1;return u==s?i.pop():t.call(i,u,1),--this.size,!0}return or=n,or}var fr,ru;function Fl(){if(ru)return fr;ru=1;var e=Ue();function a(t){var n=this.__data__,r=e(n,t);return r<0?void 0:n[r][1]}return fr=a,fr}var cr,nu;function Dl(){if(nu)return cr;nu=1;var e=Ue();function a(t){return e(this.__data__,t)>-1}return cr=a,cr}var dr,tu;function Gl(){if(tu)return dr;tu=1;var e=Ue();function a(t,n){var r=this.__data__,i=e(r,t);return i<0?(++this.size,r.push([t,n])):r[i][1]=n,this}return dr=a,dr}var hr,au;function He(){if(au)return hr;au=1;var e=jl(),a=Nl(),t=Fl(),n=Dl(),r=Gl();function i(u){var s=-1,o=u==null?0:u.length;for(this.clear();++s<o;){var f=u[s];this.set(f[0],f[1])}}return i.prototype.clear=e,i.prototype.delete=a,i.prototype.get=t,i.prototype.has=n,i.prototype.set=r,hr=i,hr}var lr,iu;function Bl(){if(iu)return lr;iu=1;var e=He();function a(){this.__data__=new e,this.size=0}return lr=a,lr}var vr,su;function Ul(){if(su)return vr;su=1;function e(a){var t=this.__data__,n=t.delete(a);return this.size=t.size,n}return vr=e,vr}var pr,uu;function Hl(){if(uu)return pr;uu=1;function e(a){return this.__data__.get(a)}return pr=e,pr}var gr,ou;function zl(){if(ou)return gr;ou=1;function e(a){return this.__data__.has(a)}return gr=e,gr}var _r,fu;function qh(){if(fu)return _r;fu=1;var e=typeof Ge=="object"&&Ge&&Ge.Object===Object&&Ge;return _r=e,_r}var br,cu;function re(){if(cu)return br;cu=1;var e=qh(),a=typeof self=="object"&&self&&self.Object===Object&&self,t=e||a||Function("return this")();return br=t,br}var yr,du;function Re(){if(du)return yr;du=1;var e=re(),a=e.Symbol;return yr=a,yr}var mr,hu;function Vl(){if(hu)return mr;hu=1;var e=Re(),a=Object.prototype,t=a.hasOwnProperty,n=a.toString,r=e?e.toStringTag:void 0;function i(u){var s=t.call(u,r),o=u[r];try{u[r]=void 0;var f=!0}catch{}var c=n.call(u);return f&&(s?u[r]=o:delete u[r]),c}return mr=i,mr}var qr,lu;function Kl(){if(lu)return qr;lu=1;var e=Object.prototype,a=e.toString;function t(n){return a.call(n)}return qr=t,qr}var wr,vu;function ve(){if(vu)return wr;vu=1;var e=Re(),a=Vl(),t=Kl(),n="[object Null]",r="[object Undefined]",i=e?e.toStringTag:void 0;function u(s){return s==null?s===void 0?r:n:i&&i in Object(s)?a(s):t(s)}return wr=u,wr}var Rr,pu;function J(){if(pu)return Rr;pu=1;function e(a){var t=typeof a;return a!=null&&(t=="object"||t=="function")}return Rr=e,Rr}var Er,gu;function ke(){if(gu)return Er;gu=1;var e=ve(),a=J(),t="[object AsyncFunction]",n="[object Function]",r="[object GeneratorFunction]",i="[object Proxy]";function u(s){if(!a(s))return!1;var o=e(s);return o==n||o==r||o==t||o==i}return Er=u,Er}var xr,_u;function Wl(){if(_u)return xr;_u=1;var e=re(),a=e["__core-js_shared__"];return xr=a,xr}var Cr,bu;function Yl(){if(bu)return Cr;bu=1;var e=Wl(),a=(function(){var n=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})();function t(n){return!!a&&a in n}return Cr=t,Cr}var Sr,yu;function wh(){if(yu)return Sr;yu=1;var e=Function.prototype,a=e.toString;function t(n){if(n!=null){try{return a.call(n)}catch{}try{return n+""}catch{}}return""}return Sr=t,Sr}var Ir,mu;function $l(){if(mu)return Ir;mu=1;var e=ke(),a=Yl(),t=J(),n=wh(),r=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,u=Function.prototype,s=Object.prototype,o=u.toString,f=s.hasOwnProperty,c=RegExp("^"+o.call(f).replace(r,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function d(h){if(!t(h)||a(h))return!1;var l=e(h)?c:i;return l.test(n(h))}return Ir=d,Ir}var Tr,qu;function Xl(){if(qu)return Tr;qu=1;function e(a,t){return a?.[t]}return Tr=e,Tr}var Ar,wu;function pe(){if(wu)return Ar;wu=1;var e=$l(),a=Xl();function t(n,r){var i=a(n,r);return e(i)?i:void 0}return Ar=t,Ar}var Or,Ru;function xs(){if(Ru)return Or;Ru=1;var e=pe(),a=re(),t=e(a,"Map");return Or=t,Or}var kr,Eu;function ze(){if(Eu)return kr;Eu=1;var e=pe(),a=e(Object,"create");return kr=a,kr}var Mr,xu;function Zl(){if(xu)return Mr;xu=1;var e=ze();function a(){this.__data__=e?e(null):{},this.size=0}return Mr=a,Mr}var Pr,Cu;function Jl(){if(Cu)return Pr;Cu=1;function e(a){var t=this.has(a)&&delete this.__data__[a];return this.size-=t?1:0,t}return Pr=e,Pr}var Lr,Su;function Ql(){if(Su)return Lr;Su=1;var e=ze(),a="__lodash_hash_undefined__",t=Object.prototype,n=t.hasOwnProperty;function r(i){var u=this.__data__;if(e){var s=u[i];return s===a?void 0:s}return n.call(u,i)?u[i]:void 0}return Lr=r,Lr}var jr,Iu;function ev(){if(Iu)return jr;Iu=1;var e=ze(),a=Object.prototype,t=a.hasOwnProperty;function n(r){var i=this.__data__;return e?i[r]!==void 0:t.call(i,r)}return jr=n,jr}var Nr,Tu;function rv(){if(Tu)return Nr;Tu=1;var e=ze(),a="__lodash_hash_undefined__";function t(n,r){var i=this.__data__;return this.size+=this.has(n)?0:1,i[n]=e&&r===void 0?a:r,this}return Nr=t,Nr}var Fr,Au;function nv(){if(Au)return Fr;Au=1;var e=Zl(),a=Jl(),t=Ql(),n=ev(),r=rv();function i(u){var s=-1,o=u==null?0:u.length;for(this.clear();++s<o;){var f=u[s];this.set(f[0],f[1])}}return i.prototype.clear=e,i.prototype.delete=a,i.prototype.get=t,i.prototype.has=n,i.prototype.set=r,Fr=i,Fr}var Dr,Ou;function tv(){if(Ou)return Dr;Ou=1;var e=nv(),a=He(),t=xs();function n(){this.size=0,this.__data__={hash:new e,map:new(t||a),string:new e}}return Dr=n,Dr}var Gr,ku;function av(){if(ku)return Gr;ku=1;function e(a){var t=typeof a;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?a!=="__proto__":a===null}return Gr=e,Gr}var Br,Mu;function Ve(){if(Mu)return Br;Mu=1;var e=av();function a(t,n){var r=t.__data__;return e(n)?r[typeof n=="string"?"string":"hash"]:r.map}return Br=a,Br}var Ur,Pu;function iv(){if(Pu)return Ur;Pu=1;var e=Ve();function a(t){var n=e(this,t).delete(t);return this.size-=n?1:0,n}return Ur=a,Ur}var Hr,Lu;function sv(){if(Lu)return Hr;Lu=1;var e=Ve();function a(t){return e(this,t).get(t)}return Hr=a,Hr}var zr,ju;function uv(){if(ju)return zr;ju=1;var e=Ve();function a(t){return e(this,t).has(t)}return zr=a,zr}var Vr,Nu;function ov(){if(Nu)return Vr;Nu=1;var e=Ve();function a(t,n){var r=e(this,t),i=r.size;return r.set(t,n),this.size+=r.size==i?0:1,this}return Vr=a,Vr}var Kr,Fu;function Cs(){if(Fu)return Kr;Fu=1;var e=tv(),a=iv(),t=sv(),n=uv(),r=ov();function i(u){var s=-1,o=u==null?0:u.length;for(this.clear();++s<o;){var f=u[s];this.set(f[0],f[1])}}return i.prototype.clear=e,i.prototype.delete=a,i.prototype.get=t,i.prototype.has=n,i.prototype.set=r,Kr=i,Kr}var Wr,Du;function fv(){if(Du)return Wr;Du=1;var e=He(),a=xs(),t=Cs(),n=200;function r(i,u){var s=this.__data__;if(s instanceof e){var o=s.__data__;if(!a||o.length<n-1)return o.push([i,u]),this.size=++s.size,this;s=this.__data__=new t(o)}return s.set(i,u),this.size=s.size,this}return Wr=r,Wr}var Yr,Gu;function Ke(){if(Gu)return Yr;Gu=1;var e=He(),a=Bl(),t=Ul(),n=Hl(),r=zl(),i=fv();function u(s){var o=this.__data__=new e(s);this.size=o.size}return u.prototype.clear=a,u.prototype.delete=t,u.prototype.get=n,u.prototype.has=r,u.prototype.set=i,Yr=u,Yr}var $r,Bu;function Ss(){if(Bu)return $r;Bu=1;function e(a,t){for(var n=-1,r=a==null?0:a.length;++n<r&&t(a[n],n,a)!==!1;);return a}return $r=e,$r}var Xr,Uu;function Rh(){if(Uu)return Xr;Uu=1;var e=pe(),a=(function(){try{var t=e(Object,"defineProperty");return t({},"",{}),t}catch{}})();return Xr=a,Xr}var Zr,Hu;function We(){if(Hu)return Zr;Hu=1;var e=Rh();function a(t,n,r){n=="__proto__"&&e?e(t,n,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[n]=r}return Zr=a,Zr}var Jr,zu;function Ye(){if(zu)return Jr;zu=1;var e=We(),a=we(),t=Object.prototype,n=t.hasOwnProperty;function r(i,u,s){var o=i[u];(!(n.call(i,u)&&a(o,s))||s===void 0&&!(u in i))&&e(i,u,s)}return Jr=r,Jr}var Qr,Vu;function Me(){if(Vu)return Qr;Vu=1;var e=Ye(),a=We();function t(n,r,i,u){var s=!i;i||(i={});for(var o=-1,f=r.length;++o<f;){var c=r[o],d=u?u(i[c],n[c],c,i,n):void 0;d===void 0&&(d=n[c]),s?a(i,c,d):e(i,c,d)}return i}return Qr=t,Qr}var en,Ku;function cv(){if(Ku)return en;Ku=1;function e(a,t){for(var n=-1,r=Array(a);++n<a;)r[n]=t(n);return r}return en=e,en}var rn,Wu;function ne(){if(Wu)return rn;Wu=1;function e(a){return a!=null&&typeof a=="object"}return rn=e,rn}var nn,Yu;function dv(){if(Yu)return nn;Yu=1;var e=ve(),a=ne(),t="[object Arguments]";function n(r){return a(r)&&e(r)==t}return nn=n,nn}var tn,$u;function Pe(){if($u)return tn;$u=1;var e=dv(),a=ne(),t=Object.prototype,n=t.hasOwnProperty,r=t.propertyIsEnumerable,i=e((function(){return arguments})())?e:function(u){return a(u)&&n.call(u,"callee")&&!r.call(u,"callee")};return tn=i,tn}var an,Xu;function $(){if(Xu)return an;Xu=1;var e=Array.isArray;return an=e,an}var Te={exports:{}},sn,Zu;function hv(){if(Zu)return sn;Zu=1;function e(){return!1}return sn=e,sn}Te.exports;var Ju;function Ee(){return Ju||(Ju=1,(function(e,a){var t=re(),n=hv(),r=a&&!a.nodeType&&a,i=r&&!0&&e&&!e.nodeType&&e,u=i&&i.exports===r,s=u?t.Buffer:void 0,o=s?s.isBuffer:void 0,f=o||n;e.exports=f})(Te,Te.exports)),Te.exports}var un,Qu;function $e(){if(Qu)return un;Qu=1;var e=9007199254740991,a=/^(?:0|[1-9]\d*)$/;function t(n,r){var i=typeof n;return r=r??e,!!r&&(i=="number"||i!="symbol"&&a.test(n))&&n>-1&&n%1==0&&n<r}return un=t,un}var on,eo;function Is(){if(eo)return on;eo=1;var e=9007199254740991;function a(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=e}return on=a,on}var fn,ro;function lv(){if(ro)return fn;ro=1;var e=ve(),a=Is(),t=ne(),n="[object Arguments]",r="[object Array]",i="[object Boolean]",u="[object Date]",s="[object Error]",o="[object Function]",f="[object Map]",c="[object Number]",d="[object Object]",h="[object RegExp]",l="[object Set]",q="[object String]",_="[object WeakMap]",p="[object ArrayBuffer]",v="[object DataView]",g="[object Float32Array]",b="[object Float64Array]",m="[object Int8Array]",R="[object Int16Array]",x="[object Int32Array]",C="[object Uint8Array]",A="[object Uint8ClampedArray]",I="[object Uint16Array]",T="[object Uint32Array]",O={};O[g]=O[b]=O[m]=O[R]=O[x]=O[C]=O[A]=O[I]=O[T]=!0,O[n]=O[r]=O[p]=O[i]=O[v]=O[u]=O[s]=O[o]=O[f]=O[c]=O[d]=O[h]=O[l]=O[q]=O[_]=!1;function k(P){return t(P)&&a(P.length)&&!!O[e(P)]}return fn=k,fn}var cn,no;function Xe(){if(no)return cn;no=1;function e(a){return function(t){return a(t)}}return cn=e,cn}var Ae={exports:{}};Ae.exports;var to;function Ts(){return to||(to=1,(function(e,a){var t=qh(),n=a&&!a.nodeType&&a,r=n&&!0&&e&&!e.nodeType&&e,i=r&&r.exports===n,u=i&&t.process,s=(function(){try{var o=r&&r.require&&r.require("util").types;return o||u&&u.binding&&u.binding("util")}catch{}})();e.exports=s})(Ae,Ae.exports)),Ae.exports}var dn,ao;function Le(){if(ao)return dn;ao=1;var e=lv(),a=Xe(),t=Ts(),n=t&&t.isTypedArray,r=n?a(n):e;return dn=r,dn}var hn,io;function Eh(){if(io)return hn;io=1;var e=cv(),a=Pe(),t=$(),n=Ee(),r=$e(),i=Le(),u=Object.prototype,s=u.hasOwnProperty;function o(f,c){var d=t(f),h=!d&&a(f),l=!d&&!h&&n(f),q=!d&&!h&&!l&&i(f),_=d||h||l||q,p=_?e(f.length,String):[],v=p.length;for(var g in f)(c||s.call(f,g))&&!(_&&(g=="length"||l&&(g=="offset"||g=="parent")||q&&(g=="buffer"||g=="byteLength"||g=="byteOffset")||r(g,v)))&&p.push(g);return p}return hn=o,hn}var ln,so;function Ze(){if(so)return ln;so=1;var e=Object.prototype;function a(t){var n=t&&t.constructor,r=typeof n=="function"&&n.prototype||e;return t===r}return ln=a,ln}var vn,uo;function xh(){if(uo)return vn;uo=1;function e(a,t){return function(n){return a(t(n))}}return vn=e,vn}var pn,oo;function vv(){if(oo)return pn;oo=1;var e=xh(),a=e(Object.keys,Object);return pn=a,pn}var gn,fo;function As(){if(fo)return gn;fo=1;var e=Ze(),a=vv(),t=Object.prototype,n=t.hasOwnProperty;function r(i){if(!e(i))return a(i);var u=[];for(var s in Object(i))n.call(i,s)&&s!="constructor"&&u.push(s);return u}return gn=r,gn}var _n,co;function ie(){if(co)return _n;co=1;var e=ke(),a=Is();function t(n){return n!=null&&a(n.length)&&!e(n)}return _n=t,_n}var bn,ho;function ce(){if(ho)return bn;ho=1;var e=Eh(),a=As(),t=ie();function n(r){return t(r)?e(r):a(r)}return bn=n,bn}var yn,lo;function pv(){if(lo)return yn;lo=1;var e=Me(),a=ce();function t(n,r){return n&&e(r,a(r),n)}return yn=t,yn}var mn,vo;function gv(){if(vo)return mn;vo=1;function e(a){var t=[];if(a!=null)for(var n in Object(a))t.push(n);return t}return mn=e,mn}var qn,po;function _v(){if(po)return qn;po=1;var e=J(),a=Ze(),t=gv(),n=Object.prototype,r=n.hasOwnProperty;function i(u){if(!e(u))return t(u);var s=a(u),o=[];for(var f in u)f=="constructor"&&(s||!r.call(u,f))||o.push(f);return o}return qn=i,qn}var wn,go;function ge(){if(go)return wn;go=1;var e=Eh(),a=_v(),t=ie();function n(r){return t(r)?e(r,!0):a(r)}return wn=n,wn}var Rn,_o;function bv(){if(_o)return Rn;_o=1;var e=Me(),a=ge();function t(n,r){return n&&e(r,a(r),n)}return Rn=t,Rn}var Oe={exports:{}};Oe.exports;var bo;function Ch(){return bo||(bo=1,(function(e,a){var t=re(),n=a&&!a.nodeType&&a,r=n&&!0&&e&&!e.nodeType&&e,i=r&&r.exports===n,u=i?t.Buffer:void 0,s=u?u.allocUnsafe:void 0;function o(f,c){if(c)return f.slice();var d=f.length,h=s?s(d):new f.constructor(d);return f.copy(h),h}e.exports=o})(Oe,Oe.exports)),Oe.exports}var En,yo;function Sh(){if(yo)return En;yo=1;function e(a,t){var n=-1,r=a.length;for(t||(t=Array(r));++n<r;)t[n]=a[n];return t}return En=e,En}var xn,mo;function Ih(){if(mo)return xn;mo=1;function e(a,t){for(var n=-1,r=a==null?0:a.length,i=0,u=[];++n<r;){var s=a[n];t(s,n,a)&&(u[i++]=s)}return u}return xn=e,xn}var Cn,qo;function Th(){if(qo)return Cn;qo=1;function e(){return[]}return Cn=e,Cn}var Sn,wo;function Os(){if(wo)return Sn;wo=1;var e=Ih(),a=Th(),t=Object.prototype,n=t.propertyIsEnumerable,r=Object.getOwnPropertySymbols,i=r?function(u){return u==null?[]:(u=Object(u),e(r(u),function(s){return n.call(u,s)}))}:a;return Sn=i,Sn}var In,Ro;function yv(){if(Ro)return In;Ro=1;var e=Me(),a=Os();function t(n,r){return e(n,a(n),r)}return In=t,In}var Tn,Eo;function ks(){if(Eo)return Tn;Eo=1;function e(a,t){for(var n=-1,r=t.length,i=a.length;++n<r;)a[i+n]=t[n];return a}return Tn=e,Tn}var An,xo;function Je(){if(xo)return An;xo=1;var e=xh(),a=e(Object.getPrototypeOf,Object);return An=a,An}var On,Co;function Ah(){if(Co)return On;Co=1;var e=ks(),a=Je(),t=Os(),n=Th(),r=Object.getOwnPropertySymbols,i=r?function(u){for(var s=[];u;)e(s,t(u)),u=a(u);return s}:n;return On=i,On}var kn,So;function mv(){if(So)return kn;So=1;var e=Me(),a=Ah();function t(n,r){return e(n,a(n),r)}return kn=t,kn}var Mn,Io;function Oh(){if(Io)return Mn;Io=1;var e=ks(),a=$();function t(n,r,i){var u=r(n);return a(n)?u:e(u,i(n))}return Mn=t,Mn}var Pn,To;function kh(){if(To)return Pn;To=1;var e=Oh(),a=Os(),t=ce();function n(r){return e(r,t,a)}return Pn=n,Pn}var Ln,Ao;function qv(){if(Ao)return Ln;Ao=1;var e=Oh(),a=Ah(),t=ge();function n(r){return e(r,t,a)}return Ln=n,Ln}var jn,Oo;function wv(){if(Oo)return jn;Oo=1;var e=pe(),a=re(),t=e(a,"DataView");return jn=t,jn}var Nn,ko;function Rv(){if(ko)return Nn;ko=1;var e=pe(),a=re(),t=e(a,"Promise");return Nn=t,Nn}var Fn,Mo;function Mh(){if(Mo)return Fn;Mo=1;var e=pe(),a=re(),t=e(a,"Set");return Fn=t,Fn}var Dn,Po;function Ev(){if(Po)return Dn;Po=1;var e=pe(),a=re(),t=e(a,"WeakMap");return Dn=t,Dn}var Gn,Lo;function xe(){if(Lo)return Gn;Lo=1;var e=wv(),a=xs(),t=Rv(),n=Mh(),r=Ev(),i=ve(),u=wh(),s="[object Map]",o="[object Object]",f="[object Promise]",c="[object Set]",d="[object WeakMap]",h="[object DataView]",l=u(e),q=u(a),_=u(t),p=u(n),v=u(r),g=i;return(e&&g(new e(new ArrayBuffer(1)))!=h||a&&g(new a)!=s||t&&g(t.resolve())!=f||n&&g(new n)!=c||r&&g(new r)!=d)&&(g=function(b){var m=i(b),R=m==o?b.constructor:void 0,x=R?u(R):"";if(x)switch(x){case l:return h;case q:return s;case _:return f;case p:return c;case v:return d}return m}),Gn=g,Gn}var Bn,jo;function xv(){if(jo)return Bn;jo=1;var e=Object.prototype,a=e.hasOwnProperty;function t(n){var r=n.length,i=new n.constructor(r);return r&&typeof n[0]=="string"&&a.call(n,"index")&&(i.index=n.index,i.input=n.input),i}return Bn=t,Bn}var Un,No;function Ph(){if(No)return Un;No=1;var e=re(),a=e.Uint8Array;return Un=a,Un}var Hn,Fo;function Ms(){if(Fo)return Hn;Fo=1;var e=Ph();function a(t){var n=new t.constructor(t.byteLength);return new e(n).set(new e(t)),n}return Hn=a,Hn}var zn,Do;function Cv(){if(Do)return zn;Do=1;var e=Ms();function a(t,n){var r=n?e(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}return zn=a,zn}var Vn,Go;function Sv(){if(Go)return Vn;Go=1;var e=/\w*$/;function a(t){var n=new t.constructor(t.source,e.exec(t));return n.lastIndex=t.lastIndex,n}return Vn=a,Vn}var Kn,Bo;function Iv(){if(Bo)return Kn;Bo=1;var e=Re(),a=e?e.prototype:void 0,t=a?a.valueOf:void 0;function n(r){return t?Object(t.call(r)):{}}return Kn=n,Kn}var Wn,Uo;function Lh(){if(Uo)return Wn;Uo=1;var e=Ms();function a(t,n){var r=n?e(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}return Wn=a,Wn}var Yn,Ho;function Tv(){if(Ho)return Yn;Ho=1;var e=Ms(),a=Cv(),t=Sv(),n=Iv(),r=Lh(),i="[object Boolean]",u="[object Date]",s="[object Map]",o="[object Number]",f="[object RegExp]",c="[object Set]",d="[object String]",h="[object Symbol]",l="[object ArrayBuffer]",q="[object DataView]",_="[object Float32Array]",p="[object Float64Array]",v="[object Int8Array]",g="[object Int16Array]",b="[object Int32Array]",m="[object Uint8Array]",R="[object Uint8ClampedArray]",x="[object Uint16Array]",C="[object Uint32Array]";function A(I,T,O){var k=I.constructor;switch(T){case l:return e(I);case i:case u:return new k(+I);case q:return a(I,O);case _:case p:case v:case g:case b:case m:case R:case x:case C:return r(I,O);case s:return new k;case o:case d:return new k(I);case f:return t(I);case c:return new k;case h:return n(I)}}return Yn=A,Yn}var $n,zo;function jh(){if(zo)return $n;zo=1;var e=J(),a=Object.create,t=(function(){function n(){}return function(r){if(!e(r))return{};if(a)return a(r);n.prototype=r;var i=new n;return n.prototype=void 0,i}})();return $n=t,$n}var Xn,Vo;function Nh(){if(Vo)return Xn;Vo=1;var e=jh(),a=Je(),t=Ze();function n(r){return typeof r.constructor=="function"&&!t(r)?e(a(r)):{}}return Xn=n,Xn}var Zn,Ko;function Av(){if(Ko)return Zn;Ko=1;var e=xe(),a=ne(),t="[object Map]";function n(r){return a(r)&&e(r)==t}return Zn=n,Zn}var Jn,Wo;function Ov(){if(Wo)return Jn;Wo=1;var e=Av(),a=Xe(),t=Ts(),n=t&&t.isMap,r=n?a(n):e;return Jn=r,Jn}var Qn,Yo;function kv(){if(Yo)return Qn;Yo=1;var e=xe(),a=ne(),t="[object Set]";function n(r){return a(r)&&e(r)==t}return Qn=n,Qn}var et,$o;function Mv(){if($o)return et;$o=1;var e=kv(),a=Xe(),t=Ts(),n=t&&t.isSet,r=n?a(n):e;return et=r,et}var rt,Xo;function Fh(){if(Xo)return rt;Xo=1;var e=Ke(),a=Ss(),t=Ye(),n=pv(),r=bv(),i=Ch(),u=Sh(),s=yv(),o=mv(),f=kh(),c=qv(),d=xe(),h=xv(),l=Tv(),q=Nh(),_=$(),p=Ee(),v=Ov(),g=J(),b=Mv(),m=ce(),R=ge(),x=1,C=2,A=4,I="[object Arguments]",T="[object Array]",O="[object Boolean]",k="[object Date]",P="[object Error]",U="[object Function]",H="[object GeneratorFunction]",W="[object Map]",ue="[object Number]",te="[object Object]",be="[object RegExp]",Se="[object Set]",Ie="[object String]",de="[object Symbol]",he="[object WeakMap]",y="[object ArrayBuffer]",w="[object DataView]",E="[object Float32Array]",S="[object Float64Array]",M="[object Int8Array]",F="[object Int16Array]",L="[object Int32Array]",G="[object Uint8Array]",Y="[object Uint8ClampedArray]",j="[object Uint16Array]",B="[object Uint32Array]",D={};D[I]=D[T]=D[y]=D[w]=D[O]=D[k]=D[E]=D[S]=D[M]=D[F]=D[L]=D[W]=D[ue]=D[te]=D[be]=D[Se]=D[Ie]=D[de]=D[G]=D[Y]=D[j]=D[B]=!0,D[P]=D[U]=D[he]=!1;function ae(z,ye,me,ml,Ne,oe){var X,Fe=ye&x,De=ye&C,ql=ye&A;if(me&&(X=Ne?me(z,ml,Ne,oe):me(z)),X!==void 0)return X;if(!g(z))return z;var Us=_(z);if(Us){if(X=h(z),!Fe)return u(z,X)}else{var qe=d(z),Hs=qe==U||qe==H;if(p(z))return i(z,Fe);if(qe==te||qe==I||Hs&&!Ne){if(X=De||Hs?{}:q(z),!Fe)return De?o(z,r(X,z)):s(z,n(X,z))}else{if(!D[qe])return Ne?z:{};X=l(z,qe,Fe)}}oe||(oe=new e);var zs=oe.get(z);if(zs)return zs;oe.set(z,X),b(z)?z.forEach(function(fe){X.add(ae(fe,ye,me,fe,z,oe))}):v(z)&&z.forEach(function(fe,le){X.set(le,ae(fe,ye,me,le,z,oe))});var wl=ql?De?c:f:De?R:m,Vs=Us?void 0:wl(z);return a(Vs||z,function(fe,le){Vs&&(le=fe,fe=z[le]),t(X,le,ae(fe,ye,me,le,z,oe))}),X}return rt=ae,rt}var nt,Zo;function Pv(){if(Zo)return nt;Zo=1;var e=Fh(),a=4;function t(n){return e(n,a)}return nt=t,nt}var tt,Jo;function Ps(){if(Jo)return tt;Jo=1;function e(a){return function(){return a}}return tt=e,tt}var at,Qo;function Lv(){if(Qo)return at;Qo=1;function e(a){return function(t,n,r){for(var i=-1,u=Object(t),s=r(t),o=s.length;o--;){var f=s[a?o:++i];if(n(u[f],f,u)===!1)break}return t}}return at=e,at}var it,ef;function Ls(){if(ef)return it;ef=1;var e=Lv(),a=e();return it=a,it}var st,rf;function js(){if(rf)return st;rf=1;var e=Ls(),a=ce();function t(n,r){return n&&e(n,r,a)}return st=t,st}var ut,nf;function jv(){if(nf)return ut;nf=1;var e=ie();function a(t,n){return function(r,i){if(r==null)return r;if(!e(r))return t(r,i);for(var u=r.length,s=n?u:-1,o=Object(r);(n?s--:++s<u)&&i(o[s],s,o)!==!1;);return r}}return ut=a,ut}var ot,tf;function Qe(){if(tf)return ot;tf=1;var e=js(),a=jv(),t=a(e);return ot=t,ot}var ft,af;function _e(){if(af)return ft;af=1;function e(a){return a}return ft=e,ft}var ct,sf;function Dh(){if(sf)return ct;sf=1;var e=_e();function a(t){return typeof t=="function"?t:e}return ct=a,ct}var dt,uf;function Gh(){if(uf)return dt;uf=1;var e=Ss(),a=Qe(),t=Dh(),n=$();function r(i,u){var s=n(i)?e:a;return s(i,t(u))}return dt=r,dt}var ht,of;function Bh(){return of||(of=1,ht=Gh()),ht}var lt,ff;function Nv(){if(ff)return lt;ff=1;var e=Qe();function a(t,n){var r=[];return e(t,function(i,u,s){n(i,u,s)&&r.push(i)}),r}return lt=a,lt}var vt,cf;function Fv(){if(cf)return vt;cf=1;var e="__lodash_hash_undefined__";function a(t){return this.__data__.set(t,e),this}return vt=a,vt}var pt,df;function Dv(){if(df)return pt;df=1;function e(a){return this.__data__.has(a)}return pt=e,pt}var gt,hf;function Uh(){if(hf)return gt;hf=1;var e=Cs(),a=Fv(),t=Dv();function n(r){var i=-1,u=r==null?0:r.length;for(this.__data__=new e;++i<u;)this.add(r[i])}return n.prototype.add=n.prototype.push=a,n.prototype.has=t,gt=n,gt}var _t,lf;function Gv(){if(lf)return _t;lf=1;function e(a,t){for(var n=-1,r=a==null?0:a.length;++n<r;)if(t(a[n],n,a))return!0;return!1}return _t=e,_t}var bt,vf;function Hh(){if(vf)return bt;vf=1;function e(a,t){return a.has(t)}return bt=e,bt}var yt,pf;function zh(){if(pf)return yt;pf=1;var e=Uh(),a=Gv(),t=Hh(),n=1,r=2;function i(u,s,o,f,c,d){var h=o&n,l=u.length,q=s.length;if(l!=q&&!(h&&q>l))return!1;var _=d.get(u),p=d.get(s);if(_&&p)return _==s&&p==u;var v=-1,g=!0,b=o&r?new e:void 0;for(d.set(u,s),d.set(s,u);++v<l;){var m=u[v],R=s[v];if(f)var x=h?f(R,m,v,s,u,d):f(m,R,v,u,s,d);if(x!==void 0){if(x)continue;g=!1;break}if(b){if(!a(s,function(C,A){if(!t(b,A)&&(m===C||c(m,C,o,f,d)))return b.push(A)})){g=!1;break}}else if(!(m===R||c(m,R,o,f,d))){g=!1;break}}return d.delete(u),d.delete(s),g}return yt=i,yt}var mt,gf;function Bv(){if(gf)return mt;gf=1;function e(a){var t=-1,n=Array(a.size);return a.forEach(function(r,i){n[++t]=[i,r]}),n}return mt=e,mt}var qt,_f;function Ns(){if(_f)return qt;_f=1;function e(a){var t=-1,n=Array(a.size);return a.forEach(function(r){n[++t]=r}),n}return qt=e,qt}var wt,bf;function Uv(){if(bf)return wt;bf=1;var e=Re(),a=Ph(),t=we(),n=zh(),r=Bv(),i=Ns(),u=1,s=2,o="[object Boolean]",f="[object Date]",c="[object Error]",d="[object Map]",h="[object Number]",l="[object RegExp]",q="[object Set]",_="[object String]",p="[object Symbol]",v="[object ArrayBuffer]",g="[object DataView]",b=e?e.prototype:void 0,m=b?b.valueOf:void 0;function R(x,C,A,I,T,O,k){switch(A){case g:if(x.byteLength!=C.byteLength||x.byteOffset!=C.byteOffset)return!1;x=x.buffer,C=C.buffer;case v:return!(x.byteLength!=C.byteLength||!O(new a(x),new a(C)));case o:case f:case h:return t(+x,+C);case c:return x.name==C.name&&x.message==C.message;case l:case _:return x==C+"";case d:var P=r;case q:var U=I&u;if(P||(P=i),x.size!=C.size&&!U)return!1;var H=k.get(x);if(H)return H==C;I|=s,k.set(x,C);var W=n(P(x),P(C),I,T,O,k);return k.delete(x),W;case p:if(m)return m.call(x)==m.call(C)}return!1}return wt=R,wt}var Rt,yf;function Hv(){if(yf)return Rt;yf=1;var e=kh(),a=1,t=Object.prototype,n=t.hasOwnProperty;function r(i,u,s,o,f,c){var d=s&a,h=e(i),l=h.length,q=e(u),_=q.length;if(l!=_&&!d)return!1;for(var p=l;p--;){var v=h[p];if(!(d?v in u:n.call(u,v)))return!1}var g=c.get(i),b=c.get(u);if(g&&b)return g==u&&b==i;var m=!0;c.set(i,u),c.set(u,i);for(var R=d;++p<l;){v=h[p];var x=i[v],C=u[v];if(o)var A=d?o(C,x,v,u,i,c):o(x,C,v,i,u,c);if(!(A===void 0?x===C||f(x,C,s,o,c):A)){m=!1;break}R||(R=v=="constructor")}if(m&&!R){var I=i.constructor,T=u.constructor;I!=T&&"constructor"in i&&"constructor"in u&&!(typeof I=="function"&&I instanceof I&&typeof T=="function"&&T instanceof T)&&(m=!1)}return c.delete(i),c.delete(u),m}return Rt=r,Rt}var Et,mf;function zv(){if(mf)return Et;mf=1;var e=Ke(),a=zh(),t=Uv(),n=Hv(),r=xe(),i=$(),u=Ee(),s=Le(),o=1,f="[object Arguments]",c="[object Array]",d="[object Object]",h=Object.prototype,l=h.hasOwnProperty;function q(_,p,v,g,b,m){var R=i(_),x=i(p),C=R?c:r(_),A=x?c:r(p);C=C==f?d:C,A=A==f?d:A;var I=C==d,T=A==d,O=C==A;if(O&&u(_)){if(!u(p))return!1;R=!0,I=!1}if(O&&!I)return m||(m=new e),R||s(_)?a(_,p,v,g,b,m):t(_,p,C,v,g,b,m);if(!(v&o)){var k=I&&l.call(_,"__wrapped__"),P=T&&l.call(p,"__wrapped__");if(k||P){var U=k?_.value():_,H=P?p.value():p;return m||(m=new e),b(U,H,v,g,m)}}return O?(m||(m=new e),n(_,p,v,g,b,m)):!1}return Et=q,Et}var xt,qf;function Vh(){if(qf)return xt;qf=1;var e=zv(),a=ne();function t(n,r,i,u,s){return n===r?!0:n==null||r==null||!a(n)&&!a(r)?n!==n&&r!==r:e(n,r,i,u,t,s)}return xt=t,xt}var Ct,wf;function Vv(){if(wf)return Ct;wf=1;var e=Ke(),a=Vh(),t=1,n=2;function r(i,u,s,o){var f=s.length,c=f,d=!o;if(i==null)return!c;for(i=Object(i);f--;){var h=s[f];if(d&&h[2]?h[1]!==i[h[0]]:!(h[0]in i))return!1}for(;++f<c;){h=s[f];var l=h[0],q=i[l],_=h[1];if(d&&h[2]){if(q===void 0&&!(l in i))return!1}else{var p=new e;if(o)var v=o(q,_,l,i,u,p);if(!(v===void 0?a(_,q,t|n,o,p):v))return!1}}return!0}return Ct=r,Ct}var St,Rf;function Kh(){if(Rf)return St;Rf=1;var e=J();function a(t){return t===t&&!e(t)}return St=a,St}var It,Ef;function Kv(){if(Ef)return It;Ef=1;var e=Kh(),a=ce();function t(n){for(var r=a(n),i=r.length;i--;){var u=r[i],s=n[u];r[i]=[u,s,e(s)]}return r}return It=t,It}var Tt,xf;function Wh(){if(xf)return Tt;xf=1;function e(a,t){return function(n){return n==null?!1:n[a]===t&&(t!==void 0||a in Object(n))}}return Tt=e,Tt}var At,Cf;function Wv(){if(Cf)return At;Cf=1;var e=Vv(),a=Kv(),t=Wh();function n(r){var i=a(r);return i.length==1&&i[0][2]?t(i[0][0],i[0][1]):function(u){return u===r||e(u,r,i)}}return At=n,At}var Ot,Sf;function Ce(){if(Sf)return Ot;Sf=1;var e=ve(),a=ne(),t="[object Symbol]";function n(r){return typeof r=="symbol"||a(r)&&e(r)==t}return Ot=n,Ot}var kt,If;function Fs(){if(If)return kt;If=1;var e=$(),a=Ce(),t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function r(i,u){if(e(i))return!1;var s=typeof i;return s=="number"||s=="symbol"||s=="boolean"||i==null||a(i)?!0:n.test(i)||!t.test(i)||u!=null&&i in Object(u)}return kt=r,kt}var Mt,Tf;function Yv(){if(Tf)return Mt;Tf=1;var e=Cs(),a="Expected a function";function t(n,r){if(typeof n!="function"||r!=null&&typeof r!="function")throw new TypeError(a);var i=function(){var u=arguments,s=r?r.apply(this,u):u[0],o=i.cache;if(o.has(s))return o.get(s);var f=n.apply(this,u);return i.cache=o.set(s,f)||o,f};return i.cache=new(t.Cache||e),i}return t.Cache=e,Mt=t,Mt}var Pt,Af;function $v(){if(Af)return Pt;Af=1;var e=Yv(),a=500;function t(n){var r=e(n,function(u){return i.size===a&&i.clear(),u}),i=r.cache;return r}return Pt=t,Pt}var Lt,Of;function Xv(){if(Of)return Lt;Of=1;var e=$v(),a=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,t=/\\(\\)?/g,n=e(function(r){var i=[];return r.charCodeAt(0)===46&&i.push(""),r.replace(a,function(u,s,o,f){i.push(o?f.replace(t,"$1"):s||u)}),i});return Lt=n,Lt}var jt,kf;function er(){if(kf)return jt;kf=1;function e(a,t){for(var n=-1,r=a==null?0:a.length,i=Array(r);++n<r;)i[n]=t(a[n],n,a);return i}return jt=e,jt}var Nt,Mf;function Zv(){if(Mf)return Nt;Mf=1;var e=Re(),a=er(),t=$(),n=Ce(),r=e?e.prototype:void 0,i=r?r.toString:void 0;function u(s){if(typeof s=="string")return s;if(t(s))return a(s,u)+"";if(n(s))return i?i.call(s):"";var o=s+"";return o=="0"&&1/s==-1/0?"-0":o}return Nt=u,Nt}var Ft,Pf;function Yh(){if(Pf)return Ft;Pf=1;var e=Zv();function a(t){return t==null?"":e(t)}return Ft=a,Ft}var Dt,Lf;function rr(){if(Lf)return Dt;Lf=1;var e=$(),a=Fs(),t=Xv(),n=Yh();function r(i,u){return e(i)?i:a(i,u)?[i]:t(n(i))}return Dt=r,Dt}var Gt,jf;function je(){if(jf)return Gt;jf=1;var e=Ce();function a(t){if(typeof t=="string"||e(t))return t;var n=t+"";return n=="0"&&1/t==-1/0?"-0":n}return Gt=a,Gt}var Bt,Nf;function nr(){if(Nf)return Bt;Nf=1;var e=rr(),a=je();function t(n,r){r=e(r,n);for(var i=0,u=r.length;n!=null&&i<u;)n=n[a(r[i++])];return i&&i==u?n:void 0}return Bt=t,Bt}var Ut,Ff;function Jv(){if(Ff)return Ut;Ff=1;var e=nr();function a(t,n,r){var i=t==null?void 0:e(t,n);return i===void 0?r:i}return Ut=a,Ut}var Ht,Df;function Qv(){if(Df)return Ht;Df=1;function e(a,t){return a!=null&&t in Object(a)}return Ht=e,Ht}var zt,Gf;function $h(){if(Gf)return zt;Gf=1;var e=rr(),a=Pe(),t=$(),n=$e(),r=Is(),i=je();function u(s,o,f){o=e(o,s);for(var c=-1,d=o.length,h=!1;++c<d;){var l=i(o[c]);if(!(h=s!=null&&f(s,l)))break;s=s[l]}return h||++c!=d?h:(d=s==null?0:s.length,!!d&&r(d)&&n(l,d)&&(t(s)||a(s)))}return zt=u,zt}var Vt,Bf;function Xh(){if(Bf)return Vt;Bf=1;var e=Qv(),a=$h();function t(n,r){return n!=null&&a(n,r,e)}return Vt=t,Vt}var Kt,Uf;function ep(){if(Uf)return Kt;Uf=1;var e=Vh(),a=Jv(),t=Xh(),n=Fs(),r=Kh(),i=Wh(),u=je(),s=1,o=2;function f(c,d){return n(c)&&r(d)?i(u(c),d):function(h){var l=a(h,c);return l===void 0&&l===d?t(h,c):e(d,l,s|o)}}return Kt=f,Kt}var Wt,Hf;function Zh(){if(Hf)return Wt;Hf=1;function e(a){return function(t){return t?.[a]}}return Wt=e,Wt}var Yt,zf;function rp(){if(zf)return Yt;zf=1;var e=nr();function a(t){return function(n){return e(n,t)}}return Yt=a,Yt}var $t,Vf;function np(){if(Vf)return $t;Vf=1;var e=Zh(),a=rp(),t=Fs(),n=je();function r(i){return t(i)?e(n(i)):a(i)}return $t=r,$t}var Xt,Kf;function se(){if(Kf)return Xt;Kf=1;var e=Wv(),a=ep(),t=_e(),n=$(),r=np();function i(u){return typeof u=="function"?u:u==null?t:typeof u=="object"?n(u)?a(u[0],u[1]):e(u):r(u)}return Xt=i,Xt}var Zt,Wf;function Jh(){if(Wf)return Zt;Wf=1;var e=Ih(),a=Nv(),t=se(),n=$();function r(i,u){var s=n(i)?e:a;return s(i,t(u,3))}return Zt=r,Zt}var Jt,Yf;function tp(){if(Yf)return Jt;Yf=1;var e=Object.prototype,a=e.hasOwnProperty;function t(n,r){return n!=null&&a.call(n,r)}return Jt=t,Jt}var Qt,$f;function Qh(){if($f)return Qt;$f=1;var e=tp(),a=$h();function t(n,r){return n!=null&&a(n,r,e)}return Qt=t,Qt}var ea,Xf;function ap(){if(Xf)return ea;Xf=1;var e=As(),a=xe(),t=Pe(),n=$(),r=ie(),i=Ee(),u=Ze(),s=Le(),o="[object Map]",f="[object Set]",c=Object.prototype,d=c.hasOwnProperty;function h(l){if(l==null)return!0;if(r(l)&&(n(l)||typeof l=="string"||typeof l.splice=="function"||i(l)||s(l)||t(l)))return!l.length;var q=a(l);if(q==o||q==f)return!l.size;if(u(l))return!e(l).length;for(var _ in l)if(d.call(l,_))return!1;return!0}return ea=h,ea}var ra,Zf;function el(){if(Zf)return ra;Zf=1;function e(a){return a===void 0}return ra=e,ra}var na,Jf;function rl(){if(Jf)return na;Jf=1;var e=Qe(),a=ie();function t(n,r){var i=-1,u=a(n)?Array(n.length):[];return e(n,function(s,o,f){u[++i]=r(s,o,f)}),u}return na=t,na}var ta,Qf;function nl(){if(Qf)return ta;Qf=1;var e=er(),a=se(),t=rl(),n=$();function r(i,u){var s=n(i)?e:t;return s(i,a(u,3))}return ta=r,ta}var aa,ec;function ip(){if(ec)return aa;ec=1;function e(a,t,n,r){var i=-1,u=a==null?0:a.length;for(r&&u&&(n=a[++i]);++i<u;)n=t(n,a[i],i,a);return n}return aa=e,aa}var ia,rc;function sp(){if(rc)return ia;rc=1;function e(a,t,n,r,i){return i(a,function(u,s,o){n=r?(r=!1,u):t(n,u,s,o)}),n}return ia=e,ia}var sa,nc;function tl(){if(nc)return sa;nc=1;var e=ip(),a=Qe(),t=se(),n=sp(),r=$();function i(u,s,o){var f=r(u)?e:n,c=arguments.length<3;return f(u,t(s,4),o,c,a)}return sa=i,sa}var ua,tc;function up(){if(tc)return ua;tc=1;var e=ve(),a=$(),t=ne(),n="[object String]";function r(i){return typeof i=="string"||!a(i)&&t(i)&&e(i)==n}return ua=r,ua}var oa,ac;function op(){if(ac)return oa;ac=1;var e=Zh(),a=e("length");return oa=a,oa}var fa,ic;function fp(){if(ic)return fa;ic=1;var e="\\ud800-\\udfff",a="\\u0300-\\u036f",t="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",r=a+t+n,i="\\ufe0e\\ufe0f",u="\\u200d",s=RegExp("["+u+e+r+i+"]");function o(f){return s.test(f)}return fa=o,fa}var ca,sc;function cp(){if(sc)return ca;sc=1;var e="\\ud800-\\udfff",a="\\u0300-\\u036f",t="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",r=a+t+n,i="\\ufe0e\\ufe0f",u="["+e+"]",s="["+r+"]",o="\\ud83c[\\udffb-\\udfff]",f="(?:"+s+"|"+o+")",c="[^"+e+"]",d="(?:\\ud83c[\\udde6-\\uddff]){2}",h="[\\ud800-\\udbff][\\udc00-\\udfff]",l="\\u200d",q=f+"?",_="["+i+"]?",p="(?:"+l+"(?:"+[c,d,h].join("|")+")"+_+q+")*",v=_+q+p,g="(?:"+[c+s+"?",s,d,h,u].join("|")+")",b=RegExp(o+"(?="+o+")|"+g+v,"g");function m(R){for(var x=b.lastIndex=0;b.test(R);)++x;return x}return ca=m,ca}var da,uc;function dp(){if(uc)return da;uc=1;var e=op(),a=fp(),t=cp();function n(r){return a(r)?t(r):e(r)}return da=n,da}var ha,oc;function hp(){if(oc)return ha;oc=1;var e=As(),a=xe(),t=ie(),n=up(),r=dp(),i="[object Map]",u="[object Set]";function s(o){if(o==null)return 0;if(t(o))return n(o)?r(o):o.length;var f=a(o);return f==i||f==u?o.size:e(o).length}return ha=s,ha}var la,fc;function lp(){if(fc)return la;fc=1;var e=Ss(),a=jh(),t=js(),n=se(),r=Je(),i=$(),u=Ee(),s=ke(),o=J(),f=Le();function c(d,h,l){var q=i(d),_=q||u(d)||f(d);if(h=n(h,4),l==null){var p=d&&d.constructor;_?l=q?new p:[]:o(d)?l=s(p)?a(r(d)):{}:l={}}return(_?e:t)(d,function(v,g,b){return h(l,v,g,b)}),l}return la=c,la}var va,cc;function vp(){if(cc)return va;cc=1;var e=Re(),a=Pe(),t=$(),n=e?e.isConcatSpreadable:void 0;function r(i){return t(i)||a(i)||!!(n&&i&&i[n])}return va=r,va}var pa,dc;function Ds(){if(dc)return pa;dc=1;var e=ks(),a=vp();function t(n,r,i,u,s){var o=-1,f=n.length;for(i||(i=a),s||(s=[]);++o<f;){var c=n[o];r>0&&i(c)?r>1?t(c,r-1,i,u,s):e(s,c):u||(s[s.length]=c)}return s}return pa=t,pa}var ga,hc;function pp(){if(hc)return ga;hc=1;function e(a,t,n){switch(n.length){case 0:return a.call(t);case 1:return a.call(t,n[0]);case 2:return a.call(t,n[0],n[1]);case 3:return a.call(t,n[0],n[1],n[2])}return a.apply(t,n)}return ga=e,ga}var _a,lc;function al(){if(lc)return _a;lc=1;var e=pp(),a=Math.max;function t(n,r,i){return r=a(r===void 0?n.length-1:r,0),function(){for(var u=arguments,s=-1,o=a(u.length-r,0),f=Array(o);++s<o;)f[s]=u[r+s];s=-1;for(var c=Array(r+1);++s<r;)c[s]=u[s];return c[r]=i(f),e(n,this,c)}}return _a=t,_a}var ba,vc;function gp(){if(vc)return ba;vc=1;var e=Ps(),a=Rh(),t=_e(),n=a?function(r,i){return a(r,"toString",{configurable:!0,enumerable:!1,value:e(i),writable:!0})}:t;return ba=n,ba}var ya,pc;function _p(){if(pc)return ya;pc=1;var e=800,a=16,t=Date.now;function n(r){var i=0,u=0;return function(){var s=t(),o=a-(s-u);if(u=s,o>0){if(++i>=e)return arguments[0]}else i=0;return r.apply(void 0,arguments)}}return ya=n,ya}var ma,gc;function il(){if(gc)return ma;gc=1;var e=gp(),a=_p(),t=a(e);return ma=t,ma}var qa,_c;function tr(){if(_c)return qa;_c=1;var e=_e(),a=al(),t=il();function n(r,i){return t(a(r,i,e),r+"")}return qa=n,qa}var wa,bc;function sl(){if(bc)return wa;bc=1;function e(a,t,n,r){for(var i=a.length,u=n+(r?1:-1);r?u--:++u<i;)if(t(a[u],u,a))return u;return-1}return wa=e,wa}var Ra,yc;function bp(){if(yc)return Ra;yc=1;function e(a){return a!==a}return Ra=e,Ra}var Ea,mc;function yp(){if(mc)return Ea;mc=1;function e(a,t,n){for(var r=n-1,i=a.length;++r<i;)if(a[r]===t)return r;return-1}return Ea=e,Ea}var xa,qc;function mp(){if(qc)return xa;qc=1;var e=sl(),a=bp(),t=yp();function n(r,i,u){return i===i?t(r,i,u):e(r,a,u)}return xa=n,xa}var Ca,wc;function qp(){if(wc)return Ca;wc=1;var e=mp();function a(t,n){var r=t==null?0:t.length;return!!r&&e(t,n,0)>-1}return Ca=a,Ca}var Sa,Rc;function wp(){if(Rc)return Sa;Rc=1;function e(a,t,n){for(var r=-1,i=a==null?0:a.length;++r<i;)if(n(t,a[r]))return!0;return!1}return Sa=e,Sa}var Ia,Ec;function Rp(){if(Ec)return Ia;Ec=1;function e(){}return Ia=e,Ia}var Ta,xc;function Ep(){if(xc)return Ta;xc=1;var e=Mh(),a=Rp(),t=Ns(),n=1/0,r=e&&1/t(new e([,-0]))[1]==n?function(i){return new e(i)}:a;return Ta=r,Ta}var Aa,Cc;function xp(){if(Cc)return Aa;Cc=1;var e=Uh(),a=qp(),t=wp(),n=Hh(),r=Ep(),i=Ns(),u=200;function s(o,f,c){var d=-1,h=a,l=o.length,q=!0,_=[],p=_;if(c)q=!1,h=t;else if(l>=u){var v=f?null:r(o);if(v)return i(v);q=!1,h=n,p=new e}else p=f?[]:_;e:for(;++d<l;){var g=o[d],b=f?f(g):g;if(g=c||g!==0?g:0,q&&b===b){for(var m=p.length;m--;)if(p[m]===b)continue e;f&&p.push(b),_.push(g)}else h(p,b,c)||(p!==_&&p.push(b),_.push(g))}return _}return Aa=s,Aa}var Oa,Sc;function ul(){if(Sc)return Oa;Sc=1;var e=ie(),a=ne();function t(n){return a(n)&&e(n)}return Oa=t,Oa}var ka,Ic;function Cp(){if(Ic)return ka;Ic=1;var e=Ds(),a=tr(),t=xp(),n=ul(),r=a(function(i){return t(e(i,1,n,!0))});return ka=r,ka}var Ma,Tc;function Sp(){if(Tc)return Ma;Tc=1;var e=er();function a(t,n){return e(n,function(r){return t[r]})}return Ma=a,Ma}var Pa,Ac;function ol(){if(Ac)return Pa;Ac=1;var e=Sp(),a=ce();function t(n){return n==null?[]:e(n,a(n))}return Pa=t,Pa}var La,Oc;function Q(){if(Oc)return La;Oc=1;var e;if(typeof Es=="function")try{e={clone:Pv(),constant:Ps(),each:Bh(),filter:Jh(),has:Qh(),isArray:$(),isEmpty:ap(),isFunction:ke(),isUndefined:el(),keys:ce(),map:nl(),reduce:tl(),size:hp(),transform:lp(),union:Cp(),values:ol()}}catch{}return e||(e=window._),La=e,La}var ja,kc;function Gs(){if(kc)return ja;kc=1;var e=Q();ja=r;var a="\0",t="\0",n="";function r(c){this._isDirected=e.has(c,"directed")?c.directed:!0,this._isMultigraph=e.has(c,"multigraph")?c.multigraph:!1,this._isCompound=e.has(c,"compound")?c.compound:!1,this._label=void 0,this._defaultNodeLabelFn=e.constant(void 0),this._defaultEdgeLabelFn=e.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[t]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}r.prototype._nodeCount=0,r.prototype._edgeCount=0,r.prototype.isDirected=function(){return this._isDirected},r.prototype.isMultigraph=function(){return this._isMultigraph},r.prototype.isCompound=function(){return this._isCompound},r.prototype.setGraph=function(c){return this._label=c,this},r.prototype.graph=function(){return this._label},r.prototype.setDefaultNodeLabel=function(c){return e.isFunction(c)||(c=e.constant(c)),this._defaultNodeLabelFn=c,this},r.prototype.nodeCount=function(){return this._nodeCount},r.prototype.nodes=function(){return e.keys(this._nodes)},r.prototype.sources=function(){var c=this;return e.filter(this.nodes(),function(d){return e.isEmpty(c._in[d])})},r.prototype.sinks=function(){var c=this;return e.filter(this.nodes(),function(d){return e.isEmpty(c._out[d])})},r.prototype.setNodes=function(c,d){var h=arguments,l=this;return e.each(c,function(q){h.length>1?l.setNode(q,d):l.setNode(q)}),this},r.prototype.setNode=function(c,d){return e.has(this._nodes,c)?(arguments.length>1&&(this._nodes[c]=d),this):(this._nodes[c]=arguments.length>1?d:this._defaultNodeLabelFn(c),this._isCompound&&(this._parent[c]=t,this._children[c]={},this._children[t][c]=!0),this._in[c]={},this._preds[c]={},this._out[c]={},this._sucs[c]={},++this._nodeCount,this)},r.prototype.node=function(c){return this._nodes[c]},r.prototype.hasNode=function(c){return e.has(this._nodes,c)},r.prototype.removeNode=function(c){var d=this;if(e.has(this._nodes,c)){var h=function(l){d.removeEdge(d._edgeObjs[l])};delete this._nodes[c],this._isCompound&&(this._removeFromParentsChildList(c),delete this._parent[c],e.each(this.children(c),function(l){d.setParent(l)}),delete this._children[c]),e.each(e.keys(this._in[c]),h),delete this._in[c],delete this._preds[c],e.each(e.keys(this._out[c]),h),delete this._out[c],delete this._sucs[c],--this._nodeCount}return this},r.prototype.setParent=function(c,d){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(e.isUndefined(d))d=t;else{d+="";for(var h=d;!e.isUndefined(h);h=this.parent(h))if(h===c)throw new Error("Setting "+d+" as parent of "+c+" would create a cycle");this.setNode(d)}return this.setNode(c),this._removeFromParentsChildList(c),this._parent[c]=d,this._children[d][c]=!0,this},r.prototype._removeFromParentsChildList=function(c){delete this._children[this._parent[c]][c]},r.prototype.parent=function(c){if(this._isCompound){var d=this._parent[c];if(d!==t)return d}},r.prototype.children=function(c){if(e.isUndefined(c)&&(c=t),this._isCompound){var d=this._children[c];if(d)return e.keys(d)}else{if(c===t)return this.nodes();if(this.hasNode(c))return[]}},r.prototype.predecessors=function(c){var d=this._preds[c];if(d)return e.keys(d)},r.prototype.successors=function(c){var d=this._sucs[c];if(d)return e.keys(d)},r.prototype.neighbors=function(c){var d=this.predecessors(c);if(d)return e.union(d,this.successors(c))},r.prototype.isLeaf=function(c){var d;return this.isDirected()?d=this.successors(c):d=this.neighbors(c),d.length===0},r.prototype.filterNodes=function(c){var d=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});d.setGraph(this.graph());var h=this;e.each(this._nodes,function(_,p){c(p)&&d.setNode(p,_)}),e.each(this._edgeObjs,function(_){d.hasNode(_.v)&&d.hasNode(_.w)&&d.setEdge(_,h.edge(_))});var l={};function q(_){var p=h.parent(_);return p===void 0||d.hasNode(p)?(l[_]=p,p):p in l?l[p]:q(p)}return this._isCompound&&e.each(d.nodes(),function(_){d.setParent(_,q(_))}),d},r.prototype.setDefaultEdgeLabel=function(c){return e.isFunction(c)||(c=e.constant(c)),this._defaultEdgeLabelFn=c,this},r.prototype.edgeCount=function(){return this._edgeCount},r.prototype.edges=function(){return e.values(this._edgeObjs)},r.prototype.setPath=function(c,d){var h=this,l=arguments;return e.reduce(c,function(q,_){return l.length>1?h.setEdge(q,_,d):h.setEdge(q,_),_}),this},r.prototype.setEdge=function(){var c,d,h,l,q=!1,_=arguments[0];typeof _=="object"&&_!==null&&"v"in _?(c=_.v,d=_.w,h=_.name,arguments.length===2&&(l=arguments[1],q=!0)):(c=_,d=arguments[1],h=arguments[3],arguments.length>2&&(l=arguments[2],q=!0)),c=""+c,d=""+d,e.isUndefined(h)||(h=""+h);var p=s(this._isDirected,c,d,h);if(e.has(this._edgeLabels,p))return q&&(this._edgeLabels[p]=l),this;if(!e.isUndefined(h)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(c),this.setNode(d),this._edgeLabels[p]=q?l:this._defaultEdgeLabelFn(c,d,h);var v=o(this._isDirected,c,d,h);return c=v.v,d=v.w,Object.freeze(v),this._edgeObjs[p]=v,i(this._preds[d],c),i(this._sucs[c],d),this._in[d][p]=v,this._out[c][p]=v,this._edgeCount++,this},r.prototype.edge=function(c,d,h){var l=arguments.length===1?f(this._isDirected,arguments[0]):s(this._isDirected,c,d,h);return this._edgeLabels[l]},r.prototype.hasEdge=function(c,d,h){var l=arguments.length===1?f(this._isDirected,arguments[0]):s(this._isDirected,c,d,h);return e.has(this._edgeLabels,l)},r.prototype.removeEdge=function(c,d,h){var l=arguments.length===1?f(this._isDirected,arguments[0]):s(this._isDirected,c,d,h),q=this._edgeObjs[l];return q&&(c=q.v,d=q.w,delete this._edgeLabels[l],delete this._edgeObjs[l],u(this._preds[d],c),u(this._sucs[c],d),delete this._in[d][l],delete this._out[c][l],this._edgeCount--),this},r.prototype.inEdges=function(c,d){var h=this._in[c];if(h){var l=e.values(h);return d?e.filter(l,function(q){return q.v===d}):l}},r.prototype.outEdges=function(c,d){var h=this._out[c];if(h){var l=e.values(h);return d?e.filter(l,function(q){return q.w===d}):l}},r.prototype.nodeEdges=function(c,d){var h=this.inEdges(c,d);if(h)return h.concat(this.outEdges(c,d))};function i(c,d){c[d]?c[d]++:c[d]=1}function u(c,d){--c[d]||delete c[d]}function s(c,d,h,l){var q=""+d,_=""+h;if(!c&&q>_){var p=q;q=_,_=p}return q+n+_+n+(e.isUndefined(l)?a:l)}function o(c,d,h,l){var q=""+d,_=""+h;if(!c&&q>_){var p=q;q=_,_=p}var v={v:q,w:_};return l&&(v.name=l),v}function f(c,d){return s(c,d.v,d.w,d.name)}return ja}var Na,Mc;function Ip(){return Mc||(Mc=1,Na="2.1.8"),Na}var Fa,Pc;function Tp(){return Pc||(Pc=1,Fa={Graph:Gs(),version:Ip()}),Fa}var Da,Lc;function Ap(){if(Lc)return Da;Lc=1;var e=Q(),a=Gs();Da={write:t,read:i};function t(u){var s={options:{directed:u.isDirected(),multigraph:u.isMultigraph(),compound:u.isCompound()},nodes:n(u),edges:r(u)};return e.isUndefined(u.graph())||(s.value=e.clone(u.graph())),s}function n(u){return e.map(u.nodes(),function(s){var o=u.node(s),f=u.parent(s),c={v:s};return e.isUndefined(o)||(c.value=o),e.isUndefined(f)||(c.parent=f),c})}function r(u){return e.map(u.edges(),function(s){var o=u.edge(s),f={v:s.v,w:s.w};return e.isUndefined(s.name)||(f.name=s.name),e.isUndefined(o)||(f.value=o),f})}function i(u){var s=new a(u.options).setGraph(u.value);return e.each(u.nodes,function(o){s.setNode(o.v,o.value),o.parent&&s.setParent(o.v,o.parent)}),e.each(u.edges,function(o){s.setEdge({v:o.v,w:o.w,name:o.name},o.value)}),s}return Da}var Ga,jc;function Op(){if(jc)return Ga;jc=1;var e=Q();Ga=a;function a(t){var n={},r=[],i;function u(s){e.has(n,s)||(n[s]=!0,i.push(s),e.each(t.successors(s),u),e.each(t.predecessors(s),u))}return e.each(t.nodes(),function(s){i=[],u(s),i.length&&r.push(i)}),r}return Ga}var Ba,Nc;function fl(){if(Nc)return Ba;Nc=1;var e=Q();Ba=a;function a(){this._arr=[],this._keyIndices={}}return a.prototype.size=function(){return this._arr.length},a.prototype.keys=function(){return this._arr.map(function(t){return t.key})},a.prototype.has=function(t){return e.has(this._keyIndices,t)},a.prototype.priority=function(t){var n=this._keyIndices[t];if(n!==void 0)return this._arr[n].priority},a.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},a.prototype.add=function(t,n){var r=this._keyIndices;if(t=String(t),!e.has(r,t)){var i=this._arr,u=i.length;return r[t]=u,i.push({key:t,priority:n}),this._decrease(u),!0}return!1},a.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key},a.prototype.decrease=function(t,n){var r=this._keyIndices[t];if(n>this._arr[r].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[r].priority+" New: "+n);this._arr[r].priority=n,this._decrease(r)},a.prototype._heapify=function(t){var n=this._arr,r=2*t,i=r+1,u=t;r<n.length&&(u=n[r].priority<n[u].priority?r:u,i<n.length&&(u=n[i].priority<n[u].priority?i:u),u!==t&&(this._swap(t,u),this._heapify(u)))},a.prototype._decrease=function(t){for(var n=this._arr,r=n[t].priority,i;t!==0&&(i=t>>1,!(n[i].priority<r));)this._swap(t,i),t=i},a.prototype._swap=function(t,n){var r=this._arr,i=this._keyIndices,u=r[t],s=r[n];r[t]=s,r[n]=u,i[s.key]=t,i[u.key]=n},Ba}var Ua,Fc;function cl(){if(Fc)return Ua;Fc=1;var e=Q(),a=fl();Ua=n;var t=e.constant(1);function n(i,u,s,o){return r(i,String(u),s||t,o||function(f){return i.outEdges(f)})}function r(i,u,s,o){var f={},c=new a,d,h,l=function(q){var _=q.v!==d?q.v:q.w,p=f[_],v=s(q),g=h.distance+v;if(v<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+q+" Weight: "+v);g<p.distance&&(p.distance=g,p.predecessor=d,c.decrease(_,g))};for(i.nodes().forEach(function(q){var _=q===u?0:Number.POSITIVE_INFINITY;f[q]={distance:_},c.add(q,_)});c.size()>0&&(d=c.removeMin(),h=f[d],h.distance!==Number.POSITIVE_INFINITY);)o(d).forEach(l);return f}return Ua}var Ha,Dc;function kp(){if(Dc)return Ha;Dc=1;var e=cl(),a=Q();Ha=t;function t(n,r,i){return a.transform(n.nodes(),function(u,s){u[s]=e(n,s,r,i)},{})}return Ha}var za,Gc;function dl(){if(Gc)return za;Gc=1;var e=Q();za=a;function a(t){var n=0,r=[],i={},u=[];function s(o){var f=i[o]={onStack:!0,lowlink:n,index:n++};if(r.push(o),t.successors(o).forEach(function(h){e.has(i,h)?i[h].onStack&&(f.lowlink=Math.min(f.lowlink,i[h].index)):(s(h),f.lowlink=Math.min(f.lowlink,i[h].lowlink))}),f.lowlink===f.index){var c=[],d;do d=r.pop(),i[d].onStack=!1,c.push(d);while(o!==d);u.push(c)}}return t.nodes().forEach(function(o){e.has(i,o)||s(o)}),u}return za}var Va,Bc;function Mp(){if(Bc)return Va;Bc=1;var e=Q(),a=dl();Va=t;function t(n){return e.filter(a(n),function(r){return r.length>1||r.length===1&&n.hasEdge(r[0],r[0])})}return Va}var Ka,Uc;function Pp(){if(Uc)return Ka;Uc=1;var e=Q();Ka=t;var a=e.constant(1);function t(r,i,u){return n(r,i||a,u||function(s){return r.outEdges(s)})}function n(r,i,u){var s={},o=r.nodes();return o.forEach(function(f){s[f]={},s[f][f]={distance:0},o.forEach(function(c){f!==c&&(s[f][c]={distance:Number.POSITIVE_INFINITY})}),u(f).forEach(function(c){var d=c.v===f?c.w:c.v,h=i(c);s[f][d]={distance:h,predecessor:f}})}),o.forEach(function(f){var c=s[f];o.forEach(function(d){var h=s[d];o.forEach(function(l){var q=h[f],_=c[l],p=h[l],v=q.distance+_.distance;v<p.distance&&(p.distance=v,p.predecessor=_.predecessor)})})}),s}return Ka}var Wa,Hc;function hl(){if(Hc)return Wa;Hc=1;var e=Q();Wa=a,a.CycleException=t;function a(n){var r={},i={},u=[];function s(o){if(e.has(i,o))throw new t;e.has(r,o)||(i[o]=!0,r[o]=!0,e.each(n.predecessors(o),s),delete i[o],u.push(o))}if(e.each(n.sinks(),s),e.size(r)!==n.nodeCount())throw new t;return u}function t(){}return t.prototype=new Error,Wa}var Ya,zc;function Lp(){if(zc)return Ya;zc=1;var e=hl();Ya=a;function a(t){try{e(t)}catch(n){if(n instanceof e.CycleException)return!1;throw n}return!0}return Ya}var $a,Vc;function ll(){if(Vc)return $a;Vc=1;var e=Q();$a=a;function a(n,r,i){e.isArray(r)||(r=[r]);var u=(n.isDirected()?n.successors:n.neighbors).bind(n),s=[],o={};return e.each(r,function(f){if(!n.hasNode(f))throw new Error("Graph does not have node: "+f);t(n,f,i==="post",o,u,s)}),s}function t(n,r,i,u,s,o){e.has(u,r)||(u[r]=!0,i||o.push(r),e.each(s(r),function(f){t(n,f,i,u,s,o)}),i&&o.push(r))}return $a}var Xa,Kc;function jp(){if(Kc)return Xa;Kc=1;var e=ll();Xa=a;function a(t,n){return e(t,n,"post")}return Xa}var Za,Wc;function Np(){if(Wc)return Za;Wc=1;var e=ll();Za=a;function a(t,n){return e(t,n,"pre")}return Za}var Ja,Yc;function Fp(){if(Yc)return Ja;Yc=1;var e=Q(),a=Gs(),t=fl();Ja=n;function n(r,i){var u=new a,s={},o=new t,f;function c(h){var l=h.v===f?h.w:h.v,q=o.priority(l);if(q!==void 0){var _=i(h);_<q&&(s[l]=f,o.decrease(l,_))}}if(r.nodeCount()===0)return u;e.each(r.nodes(),function(h){o.add(h,Number.POSITIVE_INFINITY),u.setNode(h)}),o.decrease(r.nodes()[0],0);for(var d=!1;o.size()>0;){if(f=o.removeMin(),e.has(s,f))u.setEdge(f,s[f]);else{if(d)throw new Error("Input graph is not connected: "+r);d=!0}r.nodeEdges(f).forEach(c)}return u}return Ja}var Qa,$c;function Dp(){return $c||($c=1,Qa={components:Op(),dijkstra:cl(),dijkstraAll:kp(),findCycles:Mp(),floydWarshall:Pp(),isAcyclic:Lp(),postorder:jp(),preorder:Np(),prim:Fp(),tarjan:dl(),topsort:hl()}),Qa}var ei,Xc;function Gp(){if(Xc)return ei;Xc=1;var e=Tp();return ei={Graph:e.Graph,json:Ap(),alg:Dp(),version:e.version},ei}var ri,Zc;function ee(){if(Zc)return ri;Zc=1;var e;if(typeof Es=="function")try{e=Gp()}catch{}return e||(e=window.graphlib),ri=e,ri}var ni,Jc;function Bp(){if(Jc)return ni;Jc=1;var e=Fh(),a=1,t=4;function n(r){return e(r,a|t)}return ni=n,ni}var ti,Qc;function ar(){if(Qc)return ti;Qc=1;var e=we(),a=ie(),t=$e(),n=J();function r(i,u,s){if(!n(s))return!1;var o=typeof u;return(o=="number"?a(s)&&t(u,s.length):o=="string"&&u in s)?e(s[u],i):!1}return ti=r,ti}var ai,ed;function Up(){if(ed)return ai;ed=1;var e=tr(),a=we(),t=ar(),n=ge(),r=Object.prototype,i=r.hasOwnProperty,u=e(function(s,o){s=Object(s);var f=-1,c=o.length,d=c>2?o[2]:void 0;for(d&&t(o[0],o[1],d)&&(c=1);++f<c;)for(var h=o[f],l=n(h),q=-1,_=l.length;++q<_;){var p=l[q],v=s[p];(v===void 0||a(v,r[p])&&!i.call(s,p))&&(s[p]=h[p])}return s});return ai=u,ai}var ii,rd;function Hp(){if(rd)return ii;rd=1;var e=se(),a=ie(),t=ce();function n(r){return function(i,u,s){var o=Object(i);if(!a(i)){var f=e(u,3);i=t(i),u=function(d){return f(o[d],d,o)}}var c=r(i,u,s);return c>-1?o[f?i[c]:c]:void 0}}return ii=n,ii}var si,nd;function zp(){if(nd)return si;nd=1;var e=/\s/;function a(t){for(var n=t.length;n--&&e.test(t.charAt(n)););return n}return si=a,si}var ui,td;function Vp(){if(td)return ui;td=1;var e=zp(),a=/^\s+/;function t(n){return n&&n.slice(0,e(n)+1).replace(a,"")}return ui=t,ui}var oi,ad;function Kp(){if(ad)return oi;ad=1;var e=Vp(),a=J(),t=Ce(),n=NaN,r=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,u=/^0o[0-7]+$/i,s=parseInt;function o(f){if(typeof f=="number")return f;if(t(f))return n;if(a(f)){var c=typeof f.valueOf=="function"?f.valueOf():f;f=a(c)?c+"":c}if(typeof f!="string")return f===0?f:+f;f=e(f);var d=i.test(f);return d||u.test(f)?s(f.slice(2),d?2:8):r.test(f)?n:+f}return oi=o,oi}var fi,id;function vl(){if(id)return fi;id=1;var e=Kp(),a=1/0,t=17976931348623157e292;function n(r){if(!r)return r===0?r:0;if(r=e(r),r===a||r===-a){var i=r<0?-1:1;return i*t}return r===r?r:0}return fi=n,fi}var ci,sd;function Wp(){if(sd)return ci;sd=1;var e=vl();function a(t){var n=e(t),r=n%1;return n===n?r?n-r:n:0}return ci=a,ci}var di,ud;function Yp(){if(ud)return di;ud=1;var e=sl(),a=se(),t=Wp(),n=Math.max;function r(i,u,s){var o=i==null?0:i.length;if(!o)return-1;var f=s==null?0:t(s);return f<0&&(f=n(o+f,0)),e(i,a(u,3),f)}return di=r,di}var hi,od;function $p(){if(od)return hi;od=1;var e=Hp(),a=Yp(),t=e(a);return hi=t,hi}var li,fd;function pl(){if(fd)return li;fd=1;var e=Ds();function a(t){var n=t==null?0:t.length;return n?e(t,1):[]}return li=a,li}var vi,cd;function Xp(){if(cd)return vi;cd=1;var e=Ls(),a=Dh(),t=ge();function n(r,i){return r==null?r:e(r,a(i),t)}return vi=n,vi}var pi,dd;function Zp(){if(dd)return pi;dd=1;function e(a){var t=a==null?0:a.length;return t?a[t-1]:void 0}return pi=e,pi}var gi,hd;function Jp(){if(hd)return gi;hd=1;var e=We(),a=js(),t=se();function n(r,i){var u={};return i=t(i,3),a(r,function(s,o,f){e(u,o,i(s,o,f))}),u}return gi=n,gi}var _i,ld;function Bs(){if(ld)return _i;ld=1;var e=Ce();function a(t,n,r){for(var i=-1,u=t.length;++i<u;){var s=t[i],o=n(s);if(o!=null&&(f===void 0?o===o&&!e(o):r(o,f)))var f=o,c=s}return c}return _i=a,_i}var bi,vd;function Qp(){if(vd)return bi;vd=1;function e(a,t){return a>t}return bi=e,bi}var yi,pd;function eg(){if(pd)return yi;pd=1;var e=Bs(),a=Qp(),t=_e();function n(r){return r&&r.length?e(r,t,a):void 0}return yi=n,yi}var mi,gd;function gl(){if(gd)return mi;gd=1;var e=We(),a=we();function t(n,r,i){(i!==void 0&&!a(n[r],i)||i===void 0&&!(r in n))&&e(n,r,i)}return mi=t,mi}var qi,_d;function rg(){if(_d)return qi;_d=1;var e=ve(),a=Je(),t=ne(),n="[object Object]",r=Function.prototype,i=Object.prototype,u=r.toString,s=i.hasOwnProperty,o=u.call(Object);function f(c){if(!t(c)||e(c)!=n)return!1;var d=a(c);if(d===null)return!0;var h=s.call(d,"constructor")&&d.constructor;return typeof h=="function"&&h instanceof h&&u.call(h)==o}return qi=f,qi}var wi,bd;function _l(){if(bd)return wi;bd=1;function e(a,t){if(!(t==="constructor"&&typeof a[t]=="function")&&t!="__proto__")return a[t]}return wi=e,wi}var Ri,yd;function ng(){if(yd)return Ri;yd=1;var e=Me(),a=ge();function t(n){return e(n,a(n))}return Ri=t,Ri}var Ei,md;function tg(){if(md)return Ei;md=1;var e=gl(),a=Ch(),t=Lh(),n=Sh(),r=Nh(),i=Pe(),u=$(),s=ul(),o=Ee(),f=ke(),c=J(),d=rg(),h=Le(),l=_l(),q=ng();function _(p,v,g,b,m,R,x){var C=l(p,g),A=l(v,g),I=x.get(A);if(I){e(p,g,I);return}var T=R?R(C,A,g+"",p,v,x):void 0,O=T===void 0;if(O){var k=u(A),P=!k&&o(A),U=!k&&!P&&h(A);T=A,k||P||U?u(C)?T=C:s(C)?T=n(C):P?(O=!1,T=a(A,!0)):U?(O=!1,T=t(A,!0)):T=[]:d(A)||i(A)?(T=C,i(C)?T=q(C):(!c(C)||f(C))&&(T=r(A))):O=!1}O&&(x.set(A,T),m(T,A,b,R,x),x.delete(A)),e(p,g,T)}return Ei=_,Ei}var xi,qd;function ag(){if(qd)return xi;qd=1;var e=Ke(),a=gl(),t=Ls(),n=tg(),r=J(),i=ge(),u=_l();function s(o,f,c,d,h){o!==f&&t(f,function(l,q){if(h||(h=new e),r(l))n(o,f,q,c,s,d,h);else{var _=d?d(u(o,q),l,q+"",o,f,h):void 0;_===void 0&&(_=l),a(o,q,_)}},i)}return xi=s,xi}var Ci,wd;function ig(){if(wd)return Ci;wd=1;var e=tr(),a=ar();function t(n){return e(function(r,i){var u=-1,s=i.length,o=s>1?i[s-1]:void 0,f=s>2?i[2]:void 0;for(o=n.length>3&&typeof o=="function"?(s--,o):void 0,f&&a(i[0],i[1],f)&&(o=s<3?void 0:o,s=1),r=Object(r);++u<s;){var c=i[u];c&&n(r,c,u,o)}return r})}return Ci=t,Ci}var Si,Rd;function sg(){if(Rd)return Si;Rd=1;var e=ag(),a=ig(),t=a(function(n,r,i){e(n,r,i)});return Si=t,Si}var Ii,Ed;function bl(){if(Ed)return Ii;Ed=1;function e(a,t){return a<t}return Ii=e,Ii}var Ti,xd;function ug(){if(xd)return Ti;xd=1;var e=Bs(),a=bl(),t=_e();function n(r){return r&&r.length?e(r,t,a):void 0}return Ti=n,Ti}var Ai,Cd;function og(){if(Cd)return Ai;Cd=1;var e=Bs(),a=se(),t=bl();function n(r,i){return r&&r.length?e(r,a(i,2),t):void 0}return Ai=n,Ai}var Oi,Sd;function fg(){if(Sd)return Oi;Sd=1;var e=re(),a=function(){return e.Date.now()};return Oi=a,Oi}var ki,Id;function cg(){if(Id)return ki;Id=1;var e=Ye(),a=rr(),t=$e(),n=J(),r=je();function i(u,s,o,f){if(!n(u))return u;s=a(s,u);for(var c=-1,d=s.length,h=d-1,l=u;l!=null&&++c<d;){var q=r(s[c]),_=o;if(q==="__proto__"||q==="constructor"||q==="prototype")return u;if(c!=h){var p=l[q];_=f?f(p,q,l):void 0,_===void 0&&(_=n(p)?p:t(s[c+1])?[]:{})}e(l,q,_),l=l[q]}return u}return ki=i,ki}var Mi,Td;function dg(){if(Td)return Mi;Td=1;var e=nr(),a=cg(),t=rr();function n(r,i,u){for(var s=-1,o=i.length,f={};++s<o;){var c=i[s],d=e(r,c);u(d,c)&&a(f,t(c,r),d)}return f}return Mi=n,Mi}var Pi,Ad;function hg(){if(Ad)return Pi;Ad=1;var e=dg(),a=Xh();function t(n,r){return e(n,r,function(i,u){return a(n,u)})}return Pi=t,Pi}var Li,Od;function lg(){if(Od)return Li;Od=1;var e=pl(),a=al(),t=il();function n(r){return t(a(r,void 0,e),r+"")}return Li=n,Li}var ji,kd;function vg(){if(kd)return ji;kd=1;var e=hg(),a=lg(),t=a(function(n,r){return n==null?{}:e(n,r)});return ji=t,ji}var Ni,Md;function pg(){if(Md)return Ni;Md=1;var e=Math.ceil,a=Math.max;function t(n,r,i,u){for(var s=-1,o=a(e((r-n)/(i||1)),0),f=Array(o);o--;)f[u?o:++s]=n,n+=i;return f}return Ni=t,Ni}var Fi,Pd;function gg(){if(Pd)return Fi;Pd=1;var e=pg(),a=ar(),t=vl();function n(r){return function(i,u,s){return s&&typeof s!="number"&&a(i,u,s)&&(u=s=void 0),i=t(i),u===void 0?(u=i,i=0):u=t(u),s=s===void 0?i<u?1:-1:t(s),e(i,u,s,r)}}return Fi=n,Fi}var Di,Ld;function _g(){if(Ld)return Di;Ld=1;var e=gg(),a=e();return Di=a,Di}var Gi,jd;function bg(){if(jd)return Gi;jd=1;function e(a,t){var n=a.length;for(a.sort(t);n--;)a[n]=a[n].value;return a}return Gi=e,Gi}var Bi,Nd;function yg(){if(Nd)return Bi;Nd=1;var e=Ce();function a(t,n){if(t!==n){var r=t!==void 0,i=t===null,u=t===t,s=e(t),o=n!==void 0,f=n===null,c=n===n,d=e(n);if(!f&&!d&&!s&&t>n||s&&o&&c&&!f&&!d||i&&o&&c||!r&&c||!u)return 1;if(!i&&!s&&!d&&t<n||d&&r&&u&&!i&&!s||f&&r&&u||!o&&u||!c)return-1}return 0}return Bi=a,Bi}var Ui,Fd;function mg(){if(Fd)return Ui;Fd=1;var e=yg();function a(t,n,r){for(var i=-1,u=t.criteria,s=n.criteria,o=u.length,f=r.length;++i<o;){var c=e(u[i],s[i]);if(c){if(i>=f)return c;var d=r[i];return c*(d=="desc"?-1:1)}}return t.index-n.index}return Ui=a,Ui}var Hi,Dd;function qg(){if(Dd)return Hi;Dd=1;var e=er(),a=nr(),t=se(),n=rl(),r=bg(),i=Xe(),u=mg(),s=_e(),o=$();function f(c,d,h){d.length?d=e(d,function(_){return o(_)?function(p){return a(p,_.length===1?_[0]:_)}:_}):d=[s];var l=-1;d=e(d,i(t));var q=n(c,function(_,p,v){var g=e(d,function(b){return b(_)});return{criteria:g,index:++l,value:_}});return r(q,function(_,p){return u(_,p,h)})}return Hi=f,Hi}var zi,Gd;function wg(){if(Gd)return zi;Gd=1;var e=Ds(),a=qg(),t=tr(),n=ar(),r=t(function(i,u){if(i==null)return[];var s=u.length;return s>1&&n(i,u[0],u[1])?u=[]:s>2&&n(u[0],u[1],u[2])&&(u=[u[0]]),a(i,e(u,1),[])});return zi=r,zi}var Vi,Bd;function Rg(){if(Bd)return Vi;Bd=1;var e=Yh(),a=0;function t(n){var r=++a;return e(n)+r}return Vi=t,Vi}var Ki,Ud;function Eg(){if(Ud)return Ki;Ud=1;function e(a,t,n){for(var r=-1,i=a.length,u=t.length,s={};++r<i;){var o=r<u?t[r]:void 0;n(s,a[r],o)}return s}return Ki=e,Ki}var Wi,Hd;function xg(){if(Hd)return Wi;Hd=1;var e=Ye(),a=Eg();function t(n,r){return a(n||[],r||[],e)}return Wi=t,Wi}var Yi,zd;function K(){if(zd)return Yi;zd=1;var e;if(typeof Es=="function")try{e={cloneDeep:Bp(),constant:Ps(),defaults:Up(),each:Bh(),filter:Jh(),find:$p(),flatten:pl(),forEach:Gh(),forIn:Xp(),has:Qh(),isUndefined:el(),last:Zp(),map:nl(),mapValues:Jp(),max:eg(),merge:sg(),min:ug(),minBy:og(),now:fg(),pick:vg(),range:_g(),reduce:tl(),sortBy:wg(),uniqueId:Rg(),values:ol(),zipObject:xg()}}catch{}return e||(e=window._),Yi=e,Yi}var $i,Vd;function Cg(){if(Vd)return $i;Vd=1,$i=e;function e(){var n={};n._next=n._prev=n,this._sentinel=n}e.prototype.dequeue=function(){var n=this._sentinel,r=n._prev;if(r!==n)return a(r),r},e.prototype.enqueue=function(n){var r=this._sentinel;n._prev&&n._next&&a(n),n._next=r._next,r._next._prev=n,r._next=n,n._prev=r},e.prototype.toString=function(){for(var n=[],r=this._sentinel,i=r._prev;i!==r;)n.push(JSON.stringify(i,t)),i=i._prev;return"["+n.join(", ")+"]"};function a(n){n._prev._next=n._next,n._next._prev=n._prev,delete n._next,delete n._prev}function t(n,r){if(n!=="_next"&&n!=="_prev")return r}return $i}var Xi,Kd;function Sg(){if(Kd)return Xi;Kd=1;var e=K(),a=ee().Graph,t=Cg();Xi=r;var n=e.constant(1);function r(f,c){if(f.nodeCount()<=1)return[];var d=s(f,c||n),h=i(d.graph,d.buckets,d.zeroIdx);return e.flatten(e.map(h,function(l){return f.outEdges(l.v,l.w)}),!0)}function i(f,c,d){for(var h=[],l=c[c.length-1],q=c[0],_;f.nodeCount();){for(;_=q.dequeue();)u(f,c,d,_);for(;_=l.dequeue();)u(f,c,d,_);if(f.nodeCount()){for(var p=c.length-2;p>0;--p)if(_=c[p].dequeue(),_){h=h.concat(u(f,c,d,_,!0));break}}}return h}function u(f,c,d,h,l){var q=l?[]:void 0;return e.forEach(f.inEdges(h.v),function(_){var p=f.edge(_),v=f.node(_.v);l&&q.push({v:_.v,w:_.w}),v.out-=p,o(c,d,v)}),e.forEach(f.outEdges(h.v),function(_){var p=f.edge(_),v=_.w,g=f.node(v);g.in-=p,o(c,d,g)}),f.removeNode(h.v),q}function s(f,c){var d=new a,h=0,l=0;e.forEach(f.nodes(),function(p){d.setNode(p,{v:p,in:0,out:0})}),e.forEach(f.edges(),function(p){var v=d.edge(p.v,p.w)||0,g=c(p),b=v+g;d.setEdge(p.v,p.w,b),l=Math.max(l,d.node(p.v).out+=g),h=Math.max(h,d.node(p.w).in+=g)});var q=e.range(l+h+3).map(function(){return new t}),_=h+1;return e.forEach(d.nodes(),function(p){o(q,_,d.node(p))}),{graph:d,buckets:q,zeroIdx:_}}function o(f,c,d){d.out?d.in?f[d.out-d.in+c].enqueue(d):f[f.length-1].enqueue(d):f[0].enqueue(d)}return Xi}var Zi,Wd;function Ig(){if(Wd)return Zi;Wd=1;var e=K(),a=Sg();Zi={run:t,undo:r};function t(i){var u=i.graph().acyclicer==="greedy"?a(i,s(i)):n(i);e.forEach(u,function(o){var f=i.edge(o);i.removeEdge(o),f.forwardName=o.name,f.reversed=!0,i.setEdge(o.w,o.v,f,e.uniqueId("rev"))});function s(o){return function(f){return o.edge(f).weight}}}function n(i){var u=[],s={},o={};function f(c){e.has(o,c)||(o[c]=!0,s[c]=!0,e.forEach(i.outEdges(c),function(d){e.has(s,d.w)?u.push(d):f(d.w)}),delete s[c])}return e.forEach(i.nodes(),f),u}function r(i){e.forEach(i.edges(),function(u){var s=i.edge(u);if(s.reversed){i.removeEdge(u);var o=s.forwardName;delete s.reversed,delete s.forwardName,i.setEdge(u.w,u.v,s,o)}})}return Zi}var Ji,Yd;function Z(){if(Yd)return Ji;Yd=1;var e=K(),a=ee().Graph;Ji={addDummyNode:t,simplify:n,asNonCompoundGraph:r,successorWeights:i,predecessorWeights:u,intersectRect:s,buildLayerMatrix:o,normalizeRanks:f,removeEmptyRanks:c,addBorderNode:d,maxRank:h,partition:l,time:q,notime:_};function t(p,v,g,b){var m;do m=e.uniqueId(b);while(p.hasNode(m));return g.dummy=v,p.setNode(m,g),m}function n(p){var v=new a().setGraph(p.graph());return e.forEach(p.nodes(),function(g){v.setNode(g,p.node(g))}),e.forEach(p.edges(),function(g){var b=v.edge(g.v,g.w)||{weight:0,minlen:1},m=p.edge(g);v.setEdge(g.v,g.w,{weight:b.weight+m.weight,minlen:Math.max(b.minlen,m.minlen)})}),v}function r(p){var v=new a({multigraph:p.isMultigraph()}).setGraph(p.graph());return e.forEach(p.nodes(),function(g){p.children(g).length||v.setNode(g,p.node(g))}),e.forEach(p.edges(),function(g){v.setEdge(g,p.edge(g))}),v}function i(p){var v=e.map(p.nodes(),function(g){var b={};return e.forEach(p.outEdges(g),function(m){b[m.w]=(b[m.w]||0)+p.edge(m).weight}),b});return e.zipObject(p.nodes(),v)}function u(p){var v=e.map(p.nodes(),function(g){var b={};return e.forEach(p.inEdges(g),function(m){b[m.v]=(b[m.v]||0)+p.edge(m).weight}),b});return e.zipObject(p.nodes(),v)}function s(p,v){var g=p.x,b=p.y,m=v.x-g,R=v.y-b,x=p.width/2,C=p.height/2;if(!m&&!R)throw new Error("Not possible to find intersection inside of the rectangle");var A,I;return Math.abs(R)*x>Math.abs(m)*C?(R<0&&(C=-C),A=C*m/R,I=C):(m<0&&(x=-x),A=x,I=x*R/m),{x:g+A,y:b+I}}function o(p){var v=e.map(e.range(h(p)+1),function(){return[]});return e.forEach(p.nodes(),function(g){var b=p.node(g),m=b.rank;e.isUndefined(m)||(v[m][b.order]=g)}),v}function f(p){var v=e.min(e.map(p.nodes(),function(g){return p.node(g).rank}));e.forEach(p.nodes(),function(g){var b=p.node(g);e.has(b,"rank")&&(b.rank-=v)})}function c(p){var v=e.min(e.map(p.nodes(),function(R){return p.node(R).rank})),g=[];e.forEach(p.nodes(),function(R){var x=p.node(R).rank-v;g[x]||(g[x]=[]),g[x].push(R)});var b=0,m=p.graph().nodeRankFactor;e.forEach(g,function(R,x){e.isUndefined(R)&&x%m!==0?--b:b&&e.forEach(R,function(C){p.node(C).rank+=b})})}function d(p,v,g,b){var m={width:0,height:0};return arguments.length>=4&&(m.rank=g,m.order=b),t(p,"border",m,v)}function h(p){return e.max(e.map(p.nodes(),function(v){var g=p.node(v).rank;if(!e.isUndefined(g))return g}))}function l(p,v){var g={lhs:[],rhs:[]};return e.forEach(p,function(b){v(b)?g.lhs.push(b):g.rhs.push(b)}),g}function q(p,v){var g=e.now();try{return v()}finally{console.log(p+" time: "+(e.now()-g)+"ms")}}function _(p,v){return v()}return Ji}var Qi,$d;function Tg(){if($d)return Qi;$d=1;var e=K(),a=Z();Qi={run:t,undo:r};function t(i){i.graph().dummyChains=[],e.forEach(i.edges(),function(u){n(i,u)})}function n(i,u){var s=u.v,o=i.node(s).rank,f=u.w,c=i.node(f).rank,d=u.name,h=i.edge(u),l=h.labelRank;if(c!==o+1){i.removeEdge(u);var q,_,p;for(p=0,++o;o<c;++p,++o)h.points=[],_={width:0,height:0,edgeLabel:h,edgeObj:u,rank:o},q=a.addDummyNode(i,"edge",_,"_d"),o===l&&(_.width=h.width,_.height=h.height,_.dummy="edge-label",_.labelpos=h.labelpos),i.setEdge(s,q,{weight:h.weight},d),p===0&&i.graph().dummyChains.push(q),s=q;i.setEdge(s,f,{weight:h.weight},d)}}function r(i){e.forEach(i.graph().dummyChains,function(u){var s=i.node(u),o=s.edgeLabel,f;for(i.setEdge(s.edgeObj,o);s.dummy;)f=i.successors(u)[0],i.removeNode(u),o.points.push({x:s.x,y:s.y}),s.dummy==="edge-label"&&(o.x=s.x,o.y=s.y,o.width=s.width,o.height=s.height),u=f,s=i.node(u)})}return Qi}var es,Xd;function Be(){if(Xd)return es;Xd=1;var e=K();es={longestPath:a,slack:t};function a(n){var r={};function i(u){var s=n.node(u);if(e.has(r,u))return s.rank;r[u]=!0;var o=e.min(e.map(n.outEdges(u),function(f){return i(f.w)-n.edge(f).minlen}));return(o===Number.POSITIVE_INFINITY||o===void 0||o===null)&&(o=0),s.rank=o}e.forEach(n.sources(),i)}function t(n,r){return n.node(r.w).rank-n.node(r.v).rank-n.edge(r).minlen}return es}var rs,Zd;function yl(){if(Zd)return rs;Zd=1;var e=K(),a=ee().Graph,t=Be().slack;rs=n;function n(s){var o=new a({directed:!1}),f=s.nodes()[0],c=s.nodeCount();o.setNode(f,{});for(var d,h;r(o,s)<c;)d=i(o,s),h=o.hasNode(d.v)?t(s,d):-t(s,d),u(o,s,h);return o}function r(s,o){function f(c){e.forEach(o.nodeEdges(c),function(d){var h=d.v,l=c===h?d.w:h;!s.hasNode(l)&&!t(o,d)&&(s.setNode(l,{}),s.setEdge(c,l,{}),f(l))})}return e.forEach(s.nodes(),f),s.nodeCount()}function i(s,o){return e.minBy(o.edges(),function(f){if(s.hasNode(f.v)!==s.hasNode(f.w))return t(o,f)})}function u(s,o,f){e.forEach(s.nodes(),function(c){o.node(c).rank+=f})}return rs}var ns,Jd;function Ag(){if(Jd)return ns;Jd=1;var e=K(),a=yl(),t=Be().slack,n=Be().longestPath,r=ee().alg.preorder,i=ee().alg.postorder,u=Z().simplify;ns=s,s.initLowLimValues=d,s.initCutValues=o,s.calcCutValue=c,s.leaveEdge=l,s.enterEdge=q,s.exchangeEdges=_;function s(b){b=u(b),n(b);var m=a(b);d(m),o(m,b);for(var R,x;R=l(m);)x=q(m,b,R),_(m,b,R,x)}function o(b,m){var R=i(b,b.nodes());R=R.slice(0,R.length-1),e.forEach(R,function(x){f(b,m,x)})}function f(b,m,R){var x=b.node(R),C=x.parent;b.edge(R,C).cutvalue=c(b,m,R)}function c(b,m,R){var x=b.node(R),C=x.parent,A=!0,I=m.edge(R,C),T=0;return I||(A=!1,I=m.edge(C,R)),T=I.weight,e.forEach(m.nodeEdges(R),function(O){var k=O.v===R,P=k?O.w:O.v;if(P!==C){var U=k===A,H=m.edge(O).weight;if(T+=U?H:-H,v(b,R,P)){var W=b.edge(R,P).cutvalue;T+=U?-W:W}}}),T}function d(b,m){arguments.length<2&&(m=b.nodes()[0]),h(b,{},1,m)}function h(b,m,R,x,C){var A=R,I=b.node(x);return m[x]=!0,e.forEach(b.neighbors(x),function(T){e.has(m,T)||(R=h(b,m,R,T,x))}),I.low=A,I.lim=R++,C?I.parent=C:delete I.parent,R}function l(b){return e.find(b.edges(),function(m){return b.edge(m).cutvalue<0})}function q(b,m,R){var x=R.v,C=R.w;m.hasEdge(x,C)||(x=R.w,C=R.v);var A=b.node(x),I=b.node(C),T=A,O=!1;A.lim>I.lim&&(T=I,O=!0);var k=e.filter(m.edges(),function(P){return O===g(b,b.node(P.v),T)&&O!==g(b,b.node(P.w),T)});return e.minBy(k,function(P){return t(m,P)})}function _(b,m,R,x){var C=R.v,A=R.w;b.removeEdge(C,A),b.setEdge(x.v,x.w,{}),d(b),o(b,m),p(b,m)}function p(b,m){var R=e.find(b.nodes(),function(C){return!m.node(C).parent}),x=r(b,R);x=x.slice(1),e.forEach(x,function(C){var A=b.node(C).parent,I=m.edge(C,A),T=!1;I||(I=m.edge(A,C),T=!0),m.node(C).rank=m.node(A).rank+(T?I.minlen:-I.minlen)})}function v(b,m,R){return b.hasEdge(m,R)}function g(b,m,R){return R.low<=m.lim&&m.lim<=R.lim}return ns}var ts,Qd;function Og(){if(Qd)return ts;Qd=1;var e=Be(),a=e.longestPath,t=yl(),n=Ag();ts=r;function r(o){switch(o.graph().ranker){case"network-simplex":s(o);break;case"tight-tree":u(o);break;case"longest-path":i(o);break;default:s(o)}}var i=a;function u(o){a(o),t(o)}function s(o){n(o)}return ts}var as,eh;function kg(){if(eh)return as;eh=1;var e=K();as=a;function a(r){var i=n(r);e.forEach(r.graph().dummyChains,function(u){for(var s=r.node(u),o=s.edgeObj,f=t(r,i,o.v,o.w),c=f.path,d=f.lca,h=0,l=c[h],q=!0;u!==o.w;){if(s=r.node(u),q){for(;(l=c[h])!==d&&r.node(l).maxRank<s.rank;)h++;l===d&&(q=!1)}if(!q){for(;h<c.length-1&&r.node(l=c[h+1]).minRank<=s.rank;)h++;l=c[h]}r.setParent(u,l),u=r.successors(u)[0]}})}function t(r,i,u,s){var o=[],f=[],c=Math.min(i[u].low,i[s].low),d=Math.max(i[u].lim,i[s].lim),h,l;h=u;do h=r.parent(h),o.push(h);while(h&&(i[h].low>c||d>i[h].lim));for(l=h,h=s;(h=r.parent(h))!==l;)f.push(h);return{path:o.concat(f.reverse()),lca:l}}function n(r){var i={},u=0;function s(o){var f=u;e.forEach(r.children(o),s),i[o]={low:f,lim:u++}}return e.forEach(r.children(),s),i}return as}var is,rh;function Mg(){if(rh)return is;rh=1;var e=K(),a=Z();is={run:t,cleanup:u};function t(s){var o=a.addDummyNode(s,"root",{},"_root"),f=r(s),c=e.max(e.values(f))-1,d=2*c+1;s.graph().nestingRoot=o,e.forEach(s.edges(),function(l){s.edge(l).minlen*=d});var h=i(s)+1;e.forEach(s.children(),function(l){n(s,o,d,h,c,f,l)}),s.graph().nodeRankFactor=d}function n(s,o,f,c,d,h,l){var q=s.children(l);if(!q.length){l!==o&&s.setEdge(o,l,{weight:0,minlen:f});return}var _=a.addBorderNode(s,"_bt"),p=a.addBorderNode(s,"_bb"),v=s.node(l);s.setParent(_,l),v.borderTop=_,s.setParent(p,l),v.borderBottom=p,e.forEach(q,function(g){n(s,o,f,c,d,h,g);var b=s.node(g),m=b.borderTop?b.borderTop:g,R=b.borderBottom?b.borderBottom:g,x=b.borderTop?c:2*c,C=m!==R?1:d-h[l]+1;s.setEdge(_,m,{weight:x,minlen:C,nestingEdge:!0}),s.setEdge(R,p,{weight:x,minlen:C,nestingEdge:!0})}),s.parent(l)||s.setEdge(o,_,{weight:0,minlen:d+h[l]})}function r(s){var o={};function f(c,d){var h=s.children(c);h&&h.length&&e.forEach(h,function(l){f(l,d+1)}),o[c]=d}return e.forEach(s.children(),function(c){f(c,1)}),o}function i(s){return e.reduce(s.edges(),function(o,f){return o+s.edge(f).weight},0)}function u(s){var o=s.graph();s.removeNode(o.nestingRoot),delete o.nestingRoot,e.forEach(s.edges(),function(f){var c=s.edge(f);c.nestingEdge&&s.removeEdge(f)})}return is}var ss,nh;function Pg(){if(nh)return ss;nh=1;var e=K(),a=Z();ss=t;function t(r){function i(u){var s=r.children(u),o=r.node(u);if(s.length&&e.forEach(s,i),e.has(o,"minRank")){o.borderLeft=[],o.borderRight=[];for(var f=o.minRank,c=o.maxRank+1;f<c;++f)n(r,"borderLeft","_bl",u,o,f),n(r,"borderRight","_br",u,o,f)}}e.forEach(r.children(),i)}function n(r,i,u,s,o,f){var c={width:0,height:0,rank:f,borderType:i},d=o[i][f-1],h=a.addDummyNode(r,"border",c,u);o[i][f]=h,r.setParent(h,s),d&&r.setEdge(d,h,{weight:1})}return ss}var us,th;function Lg(){if(th)return us;th=1;var e=K();us={adjust:a,undo:t};function a(f){var c=f.graph().rankdir.toLowerCase();(c==="lr"||c==="rl")&&n(f)}function t(f){var c=f.graph().rankdir.toLowerCase();(c==="bt"||c==="rl")&&i(f),(c==="lr"||c==="rl")&&(s(f),n(f))}function n(f){e.forEach(f.nodes(),function(c){r(f.node(c))}),e.forEach(f.edges(),function(c){r(f.edge(c))})}function r(f){var c=f.width;f.width=f.height,f.height=c}function i(f){e.forEach(f.nodes(),function(c){u(f.node(c))}),e.forEach(f.edges(),function(c){var d=f.edge(c);e.forEach(d.points,u),e.has(d,"y")&&u(d)})}function u(f){f.y=-f.y}function s(f){e.forEach(f.nodes(),function(c){o(f.node(c))}),e.forEach(f.edges(),function(c){var d=f.edge(c);e.forEach(d.points,o),e.has(d,"x")&&o(d)})}function o(f){var c=f.x;f.x=f.y,f.y=c}return us}var os,ah;function jg(){if(ah)return os;ah=1;var e=K();os=a;function a(t){var n={},r=e.filter(t.nodes(),function(f){return!t.children(f).length}),i=e.max(e.map(r,function(f){return t.node(f).rank})),u=e.map(e.range(i+1),function(){return[]});function s(f){if(!e.has(n,f)){n[f]=!0;var c=t.node(f);u[c.rank].push(f),e.forEach(t.successors(f),s)}}var o=e.sortBy(r,function(f){return t.node(f).rank});return e.forEach(o,s),u}return os}var fs,ih;function Ng(){if(ih)return fs;ih=1;var e=K();fs=a;function a(n,r){for(var i=0,u=1;u<r.length;++u)i+=t(n,r[u-1],r[u]);return i}function t(n,r,i){for(var u=e.zipObject(i,e.map(i,function(h,l){return l})),s=e.flatten(e.map(r,function(h){return e.sortBy(e.map(n.outEdges(h),function(l){return{pos:u[l.w],weight:n.edge(l).weight}}),"pos")}),!0),o=1;o<i.length;)o<<=1;var f=2*o-1;o-=1;var c=e.map(new Array(f),function(){return 0}),d=0;return e.forEach(s.forEach(function(h){var l=h.pos+o;c[l]+=h.weight;for(var q=0;l>0;)l%2&&(q+=c[l+1]),l=l-1>>1,c[l]+=h.weight;d+=h.weight*q})),d}return fs}var cs,sh;function Fg(){if(sh)return cs;sh=1;var e=K();cs=a;function a(t,n){return e.map(n,function(r){var i=t.inEdges(r);if(i.length){var u=e.reduce(i,function(s,o){var f=t.edge(o),c=t.node(o.v);return{sum:s.sum+f.weight*c.order,weight:s.weight+f.weight}},{sum:0,weight:0});return{v:r,barycenter:u.sum/u.weight,weight:u.weight}}else return{v:r}})}return cs}var ds,uh;function Dg(){if(uh)return ds;uh=1;var e=K();ds=a;function a(r,i){var u={};e.forEach(r,function(o,f){var c=u[o.v]={indegree:0,in:[],out:[],vs:[o.v],i:f};e.isUndefined(o.barycenter)||(c.barycenter=o.barycenter,c.weight=o.weight)}),e.forEach(i.edges(),function(o){var f=u[o.v],c=u[o.w];!e.isUndefined(f)&&!e.isUndefined(c)&&(c.indegree++,f.out.push(u[o.w]))});var s=e.filter(u,function(o){return!o.indegree});return t(s)}function t(r){var i=[];function u(f){return function(c){c.merged||(e.isUndefined(c.barycenter)||e.isUndefined(f.barycenter)||c.barycenter>=f.barycenter)&&n(f,c)}}function s(f){return function(c){c.in.push(f),--c.indegree===0&&r.push(c)}}for(;r.length;){var o=r.pop();i.push(o),e.forEach(o.in.reverse(),u(o)),e.forEach(o.out,s(o))}return e.map(e.filter(i,function(f){return!f.merged}),function(f){return e.pick(f,["vs","i","barycenter","weight"])})}function n(r,i){var u=0,s=0;r.weight&&(u+=r.barycenter*r.weight,s+=r.weight),i.weight&&(u+=i.barycenter*i.weight,s+=i.weight),r.vs=i.vs.concat(r.vs),r.barycenter=u/s,r.weight=s,r.i=Math.min(i.i,r.i),i.merged=!0}return ds}var hs,oh;function Gg(){if(oh)return hs;oh=1;var e=K(),a=Z();hs=t;function t(i,u){var s=a.partition(i,function(_){return e.has(_,"barycenter")}),o=s.lhs,f=e.sortBy(s.rhs,function(_){return-_.i}),c=[],d=0,h=0,l=0;o.sort(r(!!u)),l=n(c,f,l),e.forEach(o,function(_){l+=_.vs.length,c.push(_.vs),d+=_.barycenter*_.weight,h+=_.weight,l=n(c,f,l)});var q={vs:e.flatten(c,!0)};return h&&(q.barycenter=d/h,q.weight=h),q}function n(i,u,s){for(var o;u.length&&(o=e.last(u)).i<=s;)u.pop(),i.push(o.vs),s++;return s}function r(i){return function(u,s){return u.barycenter<s.barycenter?-1:u.barycenter>s.barycenter?1:i?s.i-u.i:u.i-s.i}}return hs}var ls,fh;function Bg(){if(fh)return ls;fh=1;var e=K(),a=Fg(),t=Dg(),n=Gg();ls=r;function r(s,o,f,c){var d=s.children(o),h=s.node(o),l=h?h.borderLeft:void 0,q=h?h.borderRight:void 0,_={};l&&(d=e.filter(d,function(R){return R!==l&&R!==q}));var p=a(s,d);e.forEach(p,function(R){if(s.children(R.v).length){var x=r(s,R.v,f,c);_[R.v]=x,e.has(x,"barycenter")&&u(R,x)}});var v=t(p,f);i(v,_);var g=n(v,c);if(l&&(g.vs=e.flatten([l,g.vs,q],!0),s.predecessors(l).length)){var b=s.node(s.predecessors(l)[0]),m=s.node(s.predecessors(q)[0]);e.has(g,"barycenter")||(g.barycenter=0,g.weight=0),g.barycenter=(g.barycenter*g.weight+b.order+m.order)/(g.weight+2),g.weight+=2}return g}function i(s,o){e.forEach(s,function(f){f.vs=e.flatten(f.vs.map(function(c){return o[c]?o[c].vs:c}),!0)})}function u(s,o){e.isUndefined(s.barycenter)?(s.barycenter=o.barycenter,s.weight=o.weight):(s.barycenter=(s.barycenter*s.weight+o.barycenter*o.weight)/(s.weight+o.weight),s.weight+=o.weight)}return ls}var vs,ch;function Ug(){if(ch)return vs;ch=1;var e=K(),a=ee().Graph;vs=t;function t(r,i,u){var s=n(r),o=new a({compound:!0}).setGraph({root:s}).setDefaultNodeLabel(function(f){return r.node(f)});return e.forEach(r.nodes(),function(f){var c=r.node(f),d=r.parent(f);(c.rank===i||c.minRank<=i&&i<=c.maxRank)&&(o.setNode(f),o.setParent(f,d||s),e.forEach(r[u](f),function(h){var l=h.v===f?h.w:h.v,q=o.edge(l,f),_=e.isUndefined(q)?0:q.weight;o.setEdge(l,f,{weight:r.edge(h).weight+_})}),e.has(c,"minRank")&&o.setNode(f,{borderLeft:c.borderLeft[i],borderRight:c.borderRight[i]}))}),o}function n(r){for(var i;r.hasNode(i=e.uniqueId("_root")););return i}return vs}var ps,dh;function Hg(){if(dh)return ps;dh=1;var e=K();ps=a;function a(t,n,r){var i={},u;e.forEach(r,function(s){for(var o=t.parent(s),f,c;o;){if(f=t.parent(o),f?(c=i[f],i[f]=o):(c=u,u=o),c&&c!==o){n.setEdge(c,o);return}o=f}})}return ps}var gs,hh;function zg(){if(hh)return gs;hh=1;var e=K(),a=jg(),t=Ng(),n=Bg(),r=Ug(),i=Hg(),u=ee().Graph,s=Z();gs=o;function o(h){var l=s.maxRank(h),q=f(h,e.range(1,l+1),"inEdges"),_=f(h,e.range(l-1,-1,-1),"outEdges"),p=a(h);d(h,p);for(var v=Number.POSITIVE_INFINITY,g,b=0,m=0;m<4;++b,++m){c(b%2?q:_,b%4>=2),p=s.buildLayerMatrix(h);var R=t(h,p);R<v&&(m=0,g=e.cloneDeep(p),v=R)}d(h,g)}function f(h,l,q){return e.map(l,function(_){return r(h,_,q)})}function c(h,l){var q=new u;e.forEach(h,function(_){var p=_.graph().root,v=n(_,p,q,l);e.forEach(v.vs,function(g,b){_.node(g).order=b}),i(_,q,v.vs)})}function d(h,l){e.forEach(l,function(q){e.forEach(q,function(_,p){h.node(_).order=p})})}return gs}var _s,lh;function Vg(){if(lh)return _s;lh=1;var e=K(),a=ee().Graph,t=Z();_s={positionX:q,findType1Conflicts:n,findType2Conflicts:r,addConflict:u,hasConflict:s,verticalAlignment:o,horizontalCompaction:f,alignCoordinates:h,findSmallestWidthAlignment:d,balance:l};function n(v,g){var b={};function m(R,x){var C=0,A=0,I=R.length,T=e.last(x);return e.forEach(x,function(O,k){var P=i(v,O),U=P?v.node(P).order:I;(P||O===T)&&(e.forEach(x.slice(A,k+1),function(H){e.forEach(v.predecessors(H),function(W){var ue=v.node(W),te=ue.order;(te<C||U<te)&&!(ue.dummy&&v.node(H).dummy)&&u(b,W,H)})}),A=k+1,C=U)}),x}return e.reduce(g,m),b}function r(v,g){var b={};function m(x,C,A,I,T){var O;e.forEach(e.range(C,A),function(k){O=x[k],v.node(O).dummy&&e.forEach(v.predecessors(O),function(P){var U=v.node(P);U.dummy&&(U.order<I||U.order>T)&&u(b,P,O)})})}function R(x,C){var A=-1,I,T=0;return e.forEach(C,function(O,k){if(v.node(O).dummy==="border"){var P=v.predecessors(O);P.length&&(I=v.node(P[0]).order,m(C,T,k,A,I),T=k,A=I)}m(C,T,C.length,I,x.length)}),C}return e.reduce(g,R),b}function i(v,g){if(v.node(g).dummy)return e.find(v.predecessors(g),function(b){return v.node(b).dummy})}function u(v,g,b){if(g>b){var m=g;g=b,b=m}var R=v[g];R||(v[g]=R={}),R[b]=!0}function s(v,g,b){if(g>b){var m=g;g=b,b=m}return e.has(v[g],b)}function o(v,g,b,m){var R={},x={},C={};return e.forEach(g,function(A){e.forEach(A,function(I,T){R[I]=I,x[I]=I,C[I]=T})}),e.forEach(g,function(A){var I=-1;e.forEach(A,function(T){var O=m(T);if(O.length){O=e.sortBy(O,function(W){return C[W]});for(var k=(O.length-1)/2,P=Math.floor(k),U=Math.ceil(k);P<=U;++P){var H=O[P];x[T]===T&&I<C[H]&&!s(b,T,H)&&(x[H]=T,x[T]=R[T]=R[H],I=C[H])}}})}),{root:R,align:x}}function f(v,g,b,m,R){var x={},C=c(v,g,b,R),A=R?"borderLeft":"borderRight";function I(k,P){for(var U=C.nodes(),H=U.pop(),W={};H;)W[H]?k(H):(W[H]=!0,U.push(H),U=U.concat(P(H))),H=U.pop()}function T(k){x[k]=C.inEdges(k).reduce(function(P,U){return Math.max(P,x[U.v]+C.edge(U))},0)}function O(k){var P=C.outEdges(k).reduce(function(H,W){return Math.min(H,x[W.w]-C.edge(W))},Number.POSITIVE_INFINITY),U=v.node(k);P!==Number.POSITIVE_INFINITY&&U.borderType!==A&&(x[k]=Math.max(x[k],P))}return I(T,C.predecessors.bind(C)),I(O,C.successors.bind(C)),e.forEach(m,function(k){x[k]=x[b[k]]}),x}function c(v,g,b,m){var R=new a,x=v.graph(),C=_(x.nodesep,x.edgesep,m);return e.forEach(g,function(A){var I;e.forEach(A,function(T){var O=b[T];if(R.setNode(O),I){var k=b[I],P=R.edge(k,O);R.setEdge(k,O,Math.max(C(v,T,I),P||0))}I=T})}),R}function d(v,g){return e.minBy(e.values(g),function(b){var m=Number.NEGATIVE_INFINITY,R=Number.POSITIVE_INFINITY;return e.forIn(b,function(x,C){var A=p(v,C)/2;m=Math.max(x+A,m),R=Math.min(x-A,R)}),m-R})}function h(v,g){var b=e.values(g),m=e.min(b),R=e.max(b);e.forEach(["u","d"],function(x){e.forEach(["l","r"],function(C){var A=x+C,I=v[A],T;if(I!==g){var O=e.values(I);T=C==="l"?m-e.min(O):R-e.max(O),T&&(v[A]=e.mapValues(I,function(k){return k+T}))}})})}function l(v,g){return e.mapValues(v.ul,function(b,m){if(g)return v[g.toLowerCase()][m];var R=e.sortBy(e.map(v,m));return(R[1]+R[2])/2})}function q(v){var g=t.buildLayerMatrix(v),b=e.merge(n(v,g),r(v,g)),m={},R;e.forEach(["u","d"],function(C){R=C==="u"?g:e.values(g).reverse(),e.forEach(["l","r"],function(A){A==="r"&&(R=e.map(R,function(k){return e.values(k).reverse()}));var I=(C==="u"?v.predecessors:v.successors).bind(v),T=o(v,R,b,I),O=f(v,R,T.root,T.align,A==="r");A==="r"&&(O=e.mapValues(O,function(k){return-k})),m[C+A]=O})});var x=d(v,m);return h(m,x),l(m,v.graph().align)}function _(v,g,b){return function(m,R,x){var C=m.node(R),A=m.node(x),I=0,T;if(I+=C.width/2,e.has(C,"labelpos"))switch(C.labelpos.toLowerCase()){case"l":T=-C.width/2;break;case"r":T=C.width/2;break}if(T&&(I+=b?T:-T),T=0,I+=(C.dummy?g:v)/2,I+=(A.dummy?g:v)/2,I+=A.width/2,e.has(A,"labelpos"))switch(A.labelpos.toLowerCase()){case"l":T=A.width/2;break;case"r":T=-A.width/2;break}return T&&(I+=b?T:-T),T=0,I}}function p(v,g){return v.node(g).width}return _s}var bs,vh;function Kg(){if(vh)return bs;vh=1;var e=K(),a=Z(),t=Vg().positionX;bs=n;function n(i){i=a.asNonCompoundGraph(i),r(i),e.forEach(t(i),function(u,s){i.node(s).x=u})}function r(i){var u=a.buildLayerMatrix(i),s=i.graph().ranksep,o=0;e.forEach(u,function(f){var c=e.max(e.map(f,function(d){return i.node(d).height}));e.forEach(f,function(d){i.node(d).y=o+c/2}),o+=c+s})}return bs}var ys,ph;function Wg(){if(ph)return ys;ph=1;var e=K(),a=Ig(),t=Tg(),n=Og(),r=Z().normalizeRanks,i=kg(),u=Z().removeEmptyRanks,s=Mg(),o=Pg(),f=Lg(),c=zg(),d=Kg(),h=Z(),l=ee().Graph;ys=q;function q(y,w){var E=w&&w.debugTiming?h.time:h.notime;E("layout",function(){var S=E("  buildLayoutGraph",function(){return I(y)});E("  runLayout",function(){_(S,E)}),E("  updateInputGraph",function(){p(y,S)})})}function _(y,w){w("    makeSpaceForEdgeLabels",function(){T(y)}),w("    removeSelfEdges",function(){be(y)}),w("    acyclic",function(){a.run(y)}),w("    nestingGraph.run",function(){s.run(y)}),w("    rank",function(){n(h.asNonCompoundGraph(y))}),w("    injectEdgeLabelProxies",function(){O(y)}),w("    removeEmptyRanks",function(){u(y)}),w("    nestingGraph.cleanup",function(){s.cleanup(y)}),w("    normalizeRanks",function(){r(y)}),w("    assignRankMinMax",function(){k(y)}),w("    removeEdgeLabelProxies",function(){P(y)}),w("    normalize.run",function(){t.run(y)}),w("    parentDummyChains",function(){i(y)}),w("    addBorderSegments",function(){o(y)}),w("    order",function(){c(y)}),w("    insertSelfEdges",function(){Se(y)}),w("    adjustCoordinateSystem",function(){f.adjust(y)}),w("    position",function(){d(y)}),w("    positionSelfEdges",function(){Ie(y)}),w("    removeBorderNodes",function(){te(y)}),w("    normalize.undo",function(){t.undo(y)}),w("    fixupEdgeLabelCoords",function(){W(y)}),w("    undoCoordinateSystem",function(){f.undo(y)}),w("    translateGraph",function(){U(y)}),w("    assignNodeIntersects",function(){H(y)}),w("    reversePoints",function(){ue(y)}),w("    acyclic.undo",function(){a.undo(y)})}function p(y,w){e.forEach(y.nodes(),function(E){var S=y.node(E),M=w.node(E);S&&(S.x=M.x,S.y=M.y,w.children(E).length&&(S.width=M.width,S.height=M.height))}),e.forEach(y.edges(),function(E){var S=y.edge(E),M=w.edge(E);S.points=M.points,e.has(M,"x")&&(S.x=M.x,S.y=M.y)}),y.graph().width=w.graph().width,y.graph().height=w.graph().height}var v=["nodesep","edgesep","ranksep","marginx","marginy"],g={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},b=["acyclicer","ranker","rankdir","align"],m=["width","height"],R={width:0,height:0},x=["minlen","weight","width","height","labeloffset"],C={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},A=["labelpos"];function I(y){var w=new l({multigraph:!0,compound:!0}),E=he(y.graph());return w.setGraph(e.merge({},g,de(E,v),e.pick(E,b))),e.forEach(y.nodes(),function(S){var M=he(y.node(S));w.setNode(S,e.defaults(de(M,m),R)),w.setParent(S,y.parent(S))}),e.forEach(y.edges(),function(S){var M=he(y.edge(S));w.setEdge(S,e.merge({},C,de(M,x),e.pick(M,A)))}),w}function T(y){var w=y.graph();w.ranksep/=2,e.forEach(y.edges(),function(E){var S=y.edge(E);S.minlen*=2,S.labelpos.toLowerCase()!=="c"&&(w.rankdir==="TB"||w.rankdir==="BT"?S.width+=S.labeloffset:S.height+=S.labeloffset)})}function O(y){e.forEach(y.edges(),function(w){var E=y.edge(w);if(E.width&&E.height){var S=y.node(w.v),M=y.node(w.w),F={rank:(M.rank-S.rank)/2+S.rank,e:w};h.addDummyNode(y,"edge-proxy",F,"_ep")}})}function k(y){var w=0;e.forEach(y.nodes(),function(E){var S=y.node(E);S.borderTop&&(S.minRank=y.node(S.borderTop).rank,S.maxRank=y.node(S.borderBottom).rank,w=e.max(w,S.maxRank))}),y.graph().maxRank=w}function P(y){e.forEach(y.nodes(),function(w){var E=y.node(w);E.dummy==="edge-proxy"&&(y.edge(E.e).labelRank=E.rank,y.removeNode(w))})}function U(y){var w=Number.POSITIVE_INFINITY,E=0,S=Number.POSITIVE_INFINITY,M=0,F=y.graph(),L=F.marginx||0,G=F.marginy||0;function Y(j){var B=j.x,D=j.y,ae=j.width,z=j.height;w=Math.min(w,B-ae/2),E=Math.max(E,B+ae/2),S=Math.min(S,D-z/2),M=Math.max(M,D+z/2)}e.forEach(y.nodes(),function(j){Y(y.node(j))}),e.forEach(y.edges(),function(j){var B=y.edge(j);e.has(B,"x")&&Y(B)}),w-=L,S-=G,e.forEach(y.nodes(),function(j){var B=y.node(j);B.x-=w,B.y-=S}),e.forEach(y.edges(),function(j){var B=y.edge(j);e.forEach(B.points,function(D){D.x-=w,D.y-=S}),e.has(B,"x")&&(B.x-=w),e.has(B,"y")&&(B.y-=S)}),F.width=E-w+L,F.height=M-S+G}function H(y){e.forEach(y.edges(),function(w){var E=y.edge(w),S=y.node(w.v),M=y.node(w.w),F,L;E.points?(F=E.points[0],L=E.points[E.points.length-1]):(E.points=[],F=M,L=S),E.points.unshift(h.intersectRect(S,F)),E.points.push(h.intersectRect(M,L))})}function W(y){e.forEach(y.edges(),function(w){var E=y.edge(w);if(e.has(E,"x"))switch((E.labelpos==="l"||E.labelpos==="r")&&(E.width-=E.labeloffset),E.labelpos){case"l":E.x-=E.width/2+E.labeloffset;break;case"r":E.x+=E.width/2+E.labeloffset;break}})}function ue(y){e.forEach(y.edges(),function(w){var E=y.edge(w);E.reversed&&E.points.reverse()})}function te(y){e.forEach(y.nodes(),function(w){if(y.children(w).length){var E=y.node(w),S=y.node(E.borderTop),M=y.node(E.borderBottom),F=y.node(e.last(E.borderLeft)),L=y.node(e.last(E.borderRight));E.width=Math.abs(L.x-F.x),E.height=Math.abs(M.y-S.y),E.x=F.x+E.width/2,E.y=S.y+E.height/2}}),e.forEach(y.nodes(),function(w){y.node(w).dummy==="border"&&y.removeNode(w)})}function be(y){e.forEach(y.edges(),function(w){if(w.v===w.w){var E=y.node(w.v);E.selfEdges||(E.selfEdges=[]),E.selfEdges.push({e:w,label:y.edge(w)}),y.removeEdge(w)}})}function Se(y){var w=h.buildLayerMatrix(y);e.forEach(w,function(E){var S=0;e.forEach(E,function(M,F){var L=y.node(M);L.order=F+S,e.forEach(L.selfEdges,function(G){h.addDummyNode(y,"selfedge",{width:G.label.width,height:G.label.height,rank:L.rank,order:F+ ++S,e:G.e,label:G.label},"_se")}),delete L.selfEdges})})}function Ie(y){e.forEach(y.nodes(),function(w){var E=y.node(w);if(E.dummy==="selfedge"){var S=y.node(E.e.v),M=S.x+S.width/2,F=S.y,L=E.x-M,G=S.height/2;y.setEdge(E.e,E.label),y.removeNode(w),E.label.points=[{x:M+2*L/3,y:F-G},{x:M+5*L/6,y:F-G},{x:M+L,y:F},{x:M+5*L/6,y:F+G},{x:M+2*L/3,y:F+G}],E.label.x=E.x,E.label.y=E.y}})}function de(y,w){return e.mapValues(e.pick(y,w),Number)}function he(y){var w={};return e.forEach(y,function(E,S){w[S.toLowerCase()]=E}),w}return ys}var ms,gh;function Yg(){if(gh)return ms;gh=1;var e=K(),a=Z(),t=ee().Graph;ms={debugOrdering:n};function n(r){var i=a.buildLayerMatrix(r),u=new t({compound:!0,multigraph:!0}).setGraph({});return e.forEach(r.nodes(),function(s){u.setNode(s,{label:s}),u.setParent(s,"layer"+r.node(s).rank)}),e.forEach(r.edges(),function(s){u.setEdge(s.v,s.w,{},s.name)}),e.forEach(i,function(s,o){var f="layer"+o;u.setNode(f,{rank:"same"}),e.reduce(s,function(c,d){return u.setEdge(c,d,{style:"invis"}),d})}),u}return ms}var qs,_h;function $g(){return _h||(_h=1,qs="0.8.5"),qs}var ws,bh;function Xg(){return bh||(bh=1,ws={graphlib:ee(),layout:Wg(),debug:Yg(),util:{time:Z().time,notime:Z().notime},version:$g()}),ws}var Zg=Xg();const yh=Rl(Zg),Jg=150,mh=120,Qg=60,e_=200,r_=50;function n_(e,a,t="LR"){const n=new Set;e.forEach(o=>{const f=o.data?.branch||"unknown";n.add(f)});const r=Array.from(n).sort(),i={};r.forEach((o,f)=>{i[o]=f});const u=new yh.graphlib.Graph;return u.setGraph({rankdir:t,ranksep:e_,nodesep:r_,edgesep:20,marginx:50,marginy:50}),u.setDefaultEdgeLabel(()=>({})),e.forEach(o=>{u.setNode(o.id,{width:mh,height:Qg})}),a.forEach(o=>{o.data?.primary===!0&&u.setEdge(o.source,o.target)}),yh.layout(u),e.map(o=>{const f=u.node(o.id),c=o.data?.branch||"unknown",h=(i[c]??0)*Jg;return{...o,position:{x:f.x-mh/2,y:h}}})}const t_={custom:kl},a_={smart:Pl},i_=640,s_=900,u_=90,o_=60,f_=20,h_=({initialNodes:e,initialEdges:a,onNodesChange:t,onEdgesChange:n,onConnect:r,onNodesDelete:i,onEntitySelect:u})=>{const s=V.useMemo(()=>e.map((y,w)=>({...y,position:y.position||{x:w*50,y:0}})),[e]),[o,f,c]=El(s),[d,h,l]=xl(a),[q,_]=V.useState(!1),[p,v]=V.useState("funnel"),g=V.useRef(e);V.useEffect(()=>{g.current!==e&&(f(y=>{const w=new Map(y.map(S=>[S.id,S.position])),E=new Map(y.map(S=>[S.id,S.hidden]));return e.map((S,M)=>{const F=w.get(S.id)??S.position,L=E.get(S.id)??!1;return{...S,position:F??{x:M*50,y:0},hidden:L}})}),_(!1),g.current=e)},[e,f]);const b=V.useRef(a);V.useEffect(()=>{b.current!==a&&(h(a),b.current=a)},[a,h]);const[m,R]=V.useState(null),[x,C]=V.useState(new Set),A=Cl(),{getNode:I,setCenter:T}=A;Ll(A);const O=Rs(y=>y?.transform?.[2]??1),k=V.useMemo(()=>{const y=new Map(o.map(j=>[j.id,j])),w=new Map;d.forEach(j=>{w.has(j.target)||w.set(j.target,[]),w.get(j.target).push(j.source)});const E=o.filter(j=>!w.has(j.id)),S=new Map,M=new Map,F=[];for(E.forEach(j=>{S.set(j.id,0),F.push(j.id)});F.length;){const j=F.shift();d.forEach(B=>{const D=B.data?.primary===!0;B.source===j&&D&&!S.has(B.target)&&(S.set(B.target,(S.get(j)||0)+1),M.set(B.target,j),F.push(B.target))})}const L=new Map(o.map(j=>[j.id,[]]));M.forEach((j,B)=>{L.has(j)&&L.get(j).push(B)});const G=new Set(Array.from(M.entries()).map(([j,B])=>`${B}->${j}`)),Y=new Map;return d.forEach(j=>{Y.has(j.source)||Y.set(j.source,[]),Y.get(j.source).push(j.target)}),{byId:y,parentsMap:w,roots:E,depth:S,primaryParent:M,treeChildrenMap:L,treeEdgeSet:G,childrenMap:Y}},[o,d]);V.useEffect(()=>{if(console.log("[Layout useEffect] triggered:",{nodesCount:o.length,layoutApplied:q,viewMode:p}),!o.length){console.log("[Layout useEffect] skip: no nodes");return}if(q){console.log("[Layout useEffect] skip: already applied");return}const y=[];if(p==="timeline"){const w=n_(o,d,"LR");y.push(...w.map(E=>({...E,position:E.position})))}else{const w=new Map,E=L=>!k.parentsMap.get(L)?.length,S=o.filter(L=>!L.hidden&&E(L.id)),M=-(S.length-1)*.5;S.forEach((L,G)=>{w.set(L.id,M+G)});const F=S.map(L=>L.id);for(;F.length;){const L=F.shift();(k.treeChildrenMap.get(L)||[]).filter(Y=>!k.byId.get(Y)?.hidden).forEach((Y,j)=>{if(w.has(Y))return;const B=w.get(L)??0,D=j===0?0:j%2===1?Math.min(j,2):-Math.min(j,2),ae=B+D;w.set(Y,ae),F.push(Y)})}for(const L of o){if(L.hidden)continue;const G=k.depth.get(L.id)??0,Y=o_+f_*G,j=w.get(L.id)??0,B=i_+j*Y,D=s_-G*u_;(L.position.x!==B||L.position.y!==D)&&y.push({...L,position:{x:B,y:D}})}}if(y.length>0){if(console.log("[Layout useEffect] applying updates:",y.length,"sample:",y.slice(0,3).map(w=>({id:w.id,pos:w.position}))),f(w=>w.map(E=>y.find(M=>M.id===E.id)||E)),t){const w=y.map(E=>({id:E.id,type:"position",position:E.position,dragging:!1}));t(w)}_(!0),console.log("[Layout useEffect] done, layoutApplied = true")}else console.log("[Layout useEffect] no updates needed")},[q,p]),V.useEffect(()=>{f(y=>y.map(w=>{const E=d.some(M=>M.source===w.id),S=x.has(w.id);return{...w,data:{...w.data,hasHiddenChildren:S&&E,hasVisibleChildren:!S&&E,onToggleSubnodes:E?()=>be({id:w.id}):void 0}}}))},[d,x,f]);const P=V.useCallback(y=>{c(y),t?.(y)},[c,t]),U=V.useCallback(y=>{l(y),n?.(y)},[l,n]),H=V.useCallback((y,w)=>{y.preventDefault(),R({x:y.clientX,y:y.clientY,node:w})},[]),W=V.useCallback(()=>R(null),[]),ue=V.useCallback((y,w)=>{u&&u({type:"node",...w})},[u]),te=V.useCallback((y,w)=>{u&&u({type:"edge",...w})},[u]),be=V.useCallback(y=>{const w=y.id,E=new Set(x),S=L=>{const G=new Set,Y=[L];for(;Y.length;){const j=Y.shift();d.forEach(B=>{const D=B.data?.primary===!0;B.source===j&&D&&(G.has(B.target)||(G.add(B.target),Y.push(B.target)))})}return G},M=!E.has(w);M?E.add(w):E.delete(w),C(E);const F=S(w);f(L=>L.map(G=>F.has(G.id)?{...G,hidden:M}:G.id===w?{...G,data:{...G.data,hasHiddenChildren:M&&F.size>0,hasVisibleChildren:!M&&F.size>0}}:G)),h(L=>L.map(G=>G.source===w||F.has(G.source)||F.has(G.target)?{...G,hidden:M}:G))},[x,d,f,h]),Se=V.useCallback((y,w)=>{f(S=>S.map(M=>M.id===y?{...M,data:{...M.data,layoutMode:w}}:M));const E=I(y);if(E&&typeof E.position?.x=="number"&&typeof E.position?.y=="number"){const S=E.position.x,M=E.position.y+180;try{T(S,M,{zoom:1.1,duration:300})}catch{}}},[f,I,T]),Ie=V.useCallback(()=>{v(y=>y==="funnel"?"timeline":"funnel"),_(!1)},[]),de=V.useMemo(()=>{const y=O<=.5,w=E=>(k.treeChildrenMap.get(E)??[]).length===0;return o.filter(E=>!(E.hidden||y&&w(E.id)&&(k.depth.get(E.id)??0)>=1)).map(E=>E.data?.tags?.includes("ex-help")?{...E,style:{...E.style,background:"rgba(255, 200, 100, 0.2)",border:"2px dashed #f59e0b"}}:{...E})},[o,k.treeChildrenMap,k.depth,O]),he=V.useMemo(()=>d.map(y=>{const w=y.data?.primary===!0,E=y.data?.auto_inferred===!0,S=y.data?.confidence??1;let M={strokeWidth:w?2:1,stroke:"#111",opacity:w?.9:.3};return E&&(M.strokeDasharray=S<.8?"3,3":"5,2",M.opacity=Math.max(.3,S*.7)),{...y,type:"smart",style:M,label:y.data?.label||null}}),[d]);return N.jsxs(N.Fragment,{children:[N.jsxs(Sl,{nodes:de,edges:he,onNodesChange:P,onEdgesChange:U,onConnect:r,onNodesDelete:i,onNodeContextMenu:H,onNodeClick:ue,onEdgeClick:te,nodeTypes:t_,edgeTypes:a_,nodesDraggable:!0,elementsSelectable:!0,fitView:!0,minZoom:.1,maxZoom:4,connectionLineType:Il.Straight,defaultEdgeOptions:{type:"smart",animated:!1,style:{strokeWidth:1,stroke:"#111"}},children:[N.jsx(Tl,{}),N.jsx(Al,{nodeColor:y=>{const w=y.data?.status||"planned";return{planned:"#94a3b8","in-progress":"#3b82f6",done:"#10b981",blocked:"#ef4444"}[w]}}),N.jsx(Ol,{variant:"dots",gap:12,size:1}),N.jsx("div",{style:{position:"absolute",top:10,right:10,zIndex:5,background:"white",padding:"8px 12px",borderRadius:"6px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",fontFamily:"system-ui, sans-serif",fontSize:"14px"},children:N.jsx("button",{onClick:Ie,style:{background:"#3b82f6",color:"white",border:"none",padding:"6px 12px",borderRadius:"4px",cursor:"pointer",fontWeight:"500"},children:p==="funnel"?"ðŸ“Š Timeline":"ðŸ”º Funnel"})})]}),m&&N.jsx(Ml,{x:m.x,y:m.y,node:m.node,onClose:W,onToggleSubnodes:be,hasHiddenSubnodes:x.has(m.node.id),onDeleteNode:y=>{f(w=>w.filter(E=>E.id!==y)),h(w=>w.filter(E=>E.source!==y&&E.target!==y)),C(w=>{const E=new Set(w);return E.delete(y),E})},onAddChildNode:y=>{const w=o.find(F=>F.id===y);if(!w)return;const E=`node-${Date.now()}`,S={id:E,type:"custom",position:{x:w.position.x+150,y:w.position.y+100},data:{label:"New Subtask",status:"planned",nodeType:"subtask",chat:"Hydra",hidden:!1}},M={id:`edge-${y}-${E}`,source:y,target:E,type:"smoothstep"};f(F=>[...F,S]),h(F=>[...F,M])},onChangeLayoutMode:Se})]})};export{h_ as default};
